(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6056],{66056:function(e,t,n){"use strict";const o=n(19677),s=n(24939),T=n(72020),E=n(3738),r=n(986),i=n(44315),a=n(13408),p=n(96399),m=n(75323),l=n(11848),c=n(84166),_=n(3749),A=n(76256),O=A.TAG_NAMES,N=A.NAMESPACES,C=A.ATTRS,d={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:a},M="hidden",h="INITIAL_MODE",R="BEFORE_HTML_MODE",g="BEFORE_HEAD_MODE",u="IN_HEAD_MODE",L="IN_HEAD_NO_SCRIPT_MODE",I="AFTER_HEAD_MODE",P="IN_BODY_MODE",f="TEXT_MODE",H="IN_TABLE_MODE",S="IN_TABLE_TEXT_MODE",k="IN_CAPTION_MODE",D="IN_COLUMN_GROUP_MODE",K="IN_TABLE_BODY_MODE",F="IN_ROW_MODE",B="IN_CELL_MODE",U="IN_SELECT_MODE",b="IN_SELECT_IN_TABLE_MODE",G="IN_TEMPLATE_MODE",Y="AFTER_BODY_MODE",v="IN_FRAMESET_MODE",x="AFTER_FRAMESET_MODE",y="AFTER_AFTER_BODY_MODE",W="AFTER_AFTER_FRAMESET_MODE",w={[O.TR]:F,[O.TBODY]:K,[O.THEAD]:K,[O.TFOOT]:K,[O.CAPTION]:k,[O.COLGROUP]:D,[O.TABLE]:H,[O.BODY]:P,[O.FRAMESET]:v},X={[O.CAPTION]:H,[O.COLGROUP]:H,[O.TBODY]:H,[O.TFOOT]:H,[O.THEAD]:H,[O.COL]:D,[O.TR]:K,[O.TD]:F,[O.TH]:F},z={[h]:{[o.CHARACTER_TOKEN]:Ee,[o.NULL_CHARACTER_TOKEN]:Ee,[o.WHITESPACE_CHARACTER_TOKEN]:ee,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?A.DOCUMENT_MODE.QUIRKS:m.getDocumentMode(t);m.isConforming(t)||e._err(c.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=R},[o.START_TAG_TOKEN]:Ee,[o.END_TAG_TOKEN]:Ee,[o.EOF_TOKEN]:Ee},[R]:{[o.CHARACTER_TOKEN]:re,[o.NULL_CHARACTER_TOKEN]:re,[o.WHITESPACE_CHARACTER_TOKEN]:ee,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){t.tagName===O.HTML?(e._insertElement(t,N.HTML),e.insertionMode=g):re(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n!==O.HTML&&n!==O.HEAD&&n!==O.BODY&&n!==O.BR||re(e,t)},[o.EOF_TOKEN]:re},[g]:{[o.CHARACTER_TOKEN]:ie,[o.NULL_CHARACTER_TOKEN]:ie,[o.WHITESPACE_CHARACTER_TOKEN]:ee,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:te,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.HEAD?(e._insertElement(t,N.HTML),e.headElement=e.openElements.current,e.insertionMode=u):ie(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?ie(e,t):e._err(c.endTagWithoutMatchingOpenElement)},[o.EOF_TOKEN]:ie},[u]:{[o.CHARACTER_TOKEN]:me,[o.NULL_CHARACTER_TOKEN]:me,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:te,[o.START_TAG_TOKEN]:ae,[o.END_TAG_TOKEN]:pe,[o.EOF_TOKEN]:me},[L]:{[o.CHARACTER_TOKEN]:le,[o.NULL_CHARACTER_TOKEN]:le,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:te,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.BASEFONT||n===O.BGSOUND||n===O.HEAD||n===O.LINK||n===O.META||n===O.NOFRAMES||n===O.STYLE?ae(e,t):n===O.NOSCRIPT?e._err(c.nestedNoscriptInHead):le(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.NOSCRIPT?(e.openElements.pop(),e.insertionMode=u):n===O.BR?le(e,t):e._err(c.endTagWithoutMatchingOpenElement)},[o.EOF_TOKEN]:le},[I]:{[o.CHARACTER_TOKEN]:ce,[o.NULL_CHARACTER_TOKEN]:ce,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:te,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.BODY?(e._insertElement(t,N.HTML),e.framesetOk=!1,e.insertionMode=P):n===O.FRAMESET?(e._insertElement(t,N.HTML),e.insertionMode=v):n===O.BASE||n===O.BASEFONT||n===O.BGSOUND||n===O.LINK||n===O.META||n===O.NOFRAMES||n===O.SCRIPT||n===O.STYLE||n===O.TEMPLATE||n===O.TITLE?(e._err(c.abandonedHeadElementChild),e.openElements.push(e.headElement),ae(e,t),e.openElements.remove(e.headElement)):n===O.HEAD?e._err(c.misplacedStartTagForHeadElement):ce(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.BODY||n===O.HTML||n===O.BR?ce(e,t):n===O.TEMPLATE?pe(e,t):e._err(c.endTagWithoutMatchingOpenElement)},[o.EOF_TOKEN]:ce},[P]:{[o.CHARACTER_TOKEN]:Ae,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:Ie,[o.END_TAG_TOKEN]:Se,[o.EOF_TOKEN]:ke},[f]:{[o.CHARACTER_TOKEN]:se,[o.NULL_CHARACTER_TOKEN]:se,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ee,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:ee,[o.END_TAG_TOKEN]:function(e,t){t.tagName===O.SCRIPT&&(e.pendingScript=e.openElements.current);e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[o.EOF_TOKEN]:function(e,t){e._err(c.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[H]:{[o.CHARACTER_TOKEN]:De,[o.NULL_CHARACTER_TOKEN]:De,[o.WHITESPACE_CHARACTER_TOKEN]:De,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:Ke,[o.END_TAG_TOKEN]:Fe,[o.EOF_TOKEN]:ke},[S]:{[o.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[o.COMMENT_TOKEN]:Ue,[o.DOCTYPE_TOKEN]:Ue,[o.START_TAG_TOKEN]:Ue,[o.END_TAG_TOKEN]:Ue,[o.EOF_TOKEN]:Ue},[k]:{[o.CHARACTER_TOKEN]:Ae,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TD||n===O.TFOOT||n===O.TH||n===O.THEAD||n===O.TR?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=H,e._processToken(t)):Ie(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.CAPTION||n===O.TABLE?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=H,n===O.TABLE&&e._processToken(t)):n!==O.BODY&&n!==O.COL&&n!==O.COLGROUP&&n!==O.HTML&&n!==O.TBODY&&n!==O.TD&&n!==O.TFOOT&&n!==O.TH&&n!==O.THEAD&&n!==O.TR&&Se(e,t)},[o.EOF_TOKEN]:ke},[D]:{[o.CHARACTER_TOKEN]:be,[o.NULL_CHARACTER_TOKEN]:be,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.COL?(e._appendElement(t,N.HTML),t.ackSelfClosing=!0):n===O.TEMPLATE?ae(e,t):be(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.COLGROUP?e.openElements.currentTagName===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=H):n===O.TEMPLATE?pe(e,t):n!==O.COL&&be(e,t)},[o.EOF_TOKEN]:ke},[K]:{[o.CHARACTER_TOKEN]:De,[o.NULL_CHARACTER_TOKEN]:De,[o.WHITESPACE_CHARACTER_TOKEN]:De,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,N.HTML),e.insertionMode=F):n===O.TH||n===O.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(O.TR),e.insertionMode=F,e._processToken(t)):n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TFOOT||n===O.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=H,e._processToken(t)):Ke(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.TBODY||n===O.TFOOT||n===O.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=H):n===O.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=H,e._processToken(t)):(n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP||n!==O.HTML&&n!==O.TD&&n!==O.TH&&n!==O.TR)&&Fe(e,t)},[o.EOF_TOKEN]:ke},[F]:{[o.CHARACTER_TOKEN]:De,[o.NULL_CHARACTER_TOKEN]:De,[o.WHITESPACE_CHARACTER_TOKEN]:De,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.TH||n===O.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,N.HTML),e.insertionMode=B,e.activeFormattingElements.insertMarker()):n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR?e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=K,e._processToken(t)):Ke(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.TR?e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=K):n===O.TABLE?e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=K,e._processToken(t)):n===O.TBODY||n===O.TFOOT||n===O.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=K,e._processToken(t)):(n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP||n!==O.HTML&&n!==O.TD&&n!==O.TH)&&Fe(e,t)},[o.EOF_TOKEN]:ke},[B]:{[o.CHARACTER_TOKEN]:Ae,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.CAPTION||n===O.COL||n===O.COLGROUP||n===O.TBODY||n===O.TD||n===O.TFOOT||n===O.TH||n===O.THEAD||n===O.TR?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),e._processToken(t)):Ie(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=F):n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP&&n!==O.HTML&&Se(e,t)},[o.EOF_TOKEN]:ke},[U]:{[o.CHARACTER_TOKEN]:se,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:Ge,[o.END_TAG_TOKEN]:Ye,[o.EOF_TOKEN]:ke},[b]:{[o.CHARACTER_TOKEN]:se,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processToken(t)):Ge(e,t)},[o.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processToken(t)):Ye(e,t)},[o.EOF_TOKEN]:ke},[G]:{[o.CHARACTER_TOKEN]:Ae,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===O.BASE||n===O.BASEFONT||n===O.BGSOUND||n===O.LINK||n===O.META||n===O.NOFRAMES||n===O.SCRIPT||n===O.STYLE||n===O.TEMPLATE||n===O.TITLE)ae(e,t);else{const o=X[n]||P;e._popTmplInsertionMode(),e._pushTmplInsertionMode(o),e.insertionMode=o,e._processToken(t)}},[o.END_TAG_TOKEN]:function(e,t){t.tagName===O.TEMPLATE&&pe(e,t)},[o.EOF_TOKEN]:ve},[Y]:{[o.CHARACTER_TOKEN]:xe,[o.NULL_CHARACTER_TOKEN]:xe,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){t.tagName===O.HTML?Ie(e,t):xe(e,t)},[o.END_TAG_TOKEN]:function(e,t){t.tagName===O.HTML?e.fragmentContext||(e.insertionMode=y):xe(e,t)},[o.EOF_TOKEN]:Te},[v]:{[o.CHARACTER_TOKEN]:ee,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.FRAMESET?e._insertElement(t,N.HTML):n===O.FRAME?(e._appendElement(t,N.HTML),t.ackSelfClosing=!0):n===O.NOFRAMES&&ae(e,t)},[o.END_TAG_TOKEN]:function(e,t){t.tagName!==O.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagName===O.FRAMESET||(e.insertionMode=x))},[o.EOF_TOKEN]:Te},[x]:{[o.CHARACTER_TOKEN]:ee,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:se,[o.COMMENT_TOKEN]:ne,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.NOFRAMES&&ae(e,t)},[o.END_TAG_TOKEN]:function(e,t){t.tagName===O.HTML&&(e.insertionMode=W)},[o.EOF_TOKEN]:Te},[y]:{[o.CHARACTER_TOKEN]:ye,[o.NULL_CHARACTER_TOKEN]:ye,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:oe,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){t.tagName===O.HTML?Ie(e,t):ye(e,t)},[o.END_TAG_TOKEN]:ye,[o.EOF_TOKEN]:Te},[W]:{[o.CHARACTER_TOKEN]:ee,[o.NULL_CHARACTER_TOKEN]:ee,[o.WHITESPACE_CHARACTER_TOKEN]:_e,[o.COMMENT_TOKEN]:oe,[o.DOCTYPE_TOKEN]:ee,[o.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.NOFRAMES&&ae(e,t)},[o.END_TAG_TOKEN]:ee,[o.EOF_TOKEN]:Te}};function V(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):He(e,t),n}function j(e,t){let n=null;for(let o=e.openElements.stackTop;o>=0;o--){const s=e.openElements.items[o];if(s===t.element)break;e._isSpecialElement(s)&&(n=s)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function Q(e,t,n){let o=t,s=e.openElements.getCommonAncestor(t);for(let T=0,E=s;E!==n;T++,E=s){s=e.openElements.getCommonAncestor(E);const n=e.activeFormattingElements.getElementEntry(E),r=n&&T>=3;!n||r?(r&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(E)):(E=J(e,n),o===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(o),e.treeAdapter.appendChild(E,o),o=E)}return o}function J(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),o=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,o),t.element=o,o}function q(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const o=e.treeAdapter.getTagName(t),s=e.treeAdapter.getNamespaceURI(t);o===O.TEMPLATE&&s===N.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Z(e,t,n){const o=e.treeAdapter.getNamespaceURI(n.element),s=n.token,T=e.treeAdapter.createElement(s.tagName,o,s.attrs);e._adoptNodes(t,T),e.treeAdapter.appendChild(t,T),e.activeFormattingElements.insertElementAfterBookmark(T,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,T)}function $(e,t){let n;for(let o=0;o<8&&(n=V(e,t),n);o++){const t=j(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const o=Q(e,t,n.element),s=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(o),q(e,s,o),Z(e,t,n)}}function ee(){}function te(e){e._err(c.misplacedDoctype)}function ne(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function oe(e,t){e._appendCommentNode(t,e.document)}function se(e,t){e._insertCharacters(t)}function Te(e){e.stopped=!0}function Ee(e,t){e._err(c.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,A.DOCUMENT_MODE.QUIRKS),e.insertionMode=R,e._processToken(t)}function re(e,t){e._insertFakeRootElement(),e.insertionMode=g,e._processToken(t)}function ie(e,t){e._insertFakeElement(O.HEAD),e.headElement=e.openElements.current,e.insertionMode=u,e._processToken(t)}function ae(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.BASE||n===O.BASEFONT||n===O.BGSOUND||n===O.LINK||n===O.META?(e._appendElement(t,N.HTML),t.ackSelfClosing=!0):n===O.TITLE?e._switchToTextParsing(t,o.MODE.RCDATA):n===O.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,o.MODE.RAWTEXT):(e._insertElement(t,N.HTML),e.insertionMode=L):n===O.NOFRAMES||n===O.STYLE?e._switchToTextParsing(t,o.MODE.RAWTEXT):n===O.SCRIPT?e._switchToTextParsing(t,o.MODE.SCRIPT_DATA):n===O.TEMPLATE?(e._insertTemplate(t,N.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=G,e._pushTmplInsertionMode(G)):n===O.HEAD?e._err(c.misplacedStartTagForHeadElement):me(e,t)}function pe(e,t){const n=t.tagName;n===O.HEAD?(e.openElements.pop(),e.insertionMode=I):n===O.BODY||n===O.BR||n===O.HTML?me(e,t):n===O.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==O.TEMPLATE&&e._err(c.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(c.endTagWithoutMatchingOpenElement)}function me(e,t){e.openElements.pop(),e.insertionMode=I,e._processToken(t)}function le(e,t){const n=t.type===o.EOF_TOKEN?c.openElementsLeftAfterEof:c.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode=u,e._processToken(t)}function ce(e,t){e._insertFakeElement(O.BODY),e.insertionMode=P,e._processToken(t)}function _e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Ae(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Oe(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML)}function Ne(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Ce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function de(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Me(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,N.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function he(e,t){e._appendElement(t,N.HTML),t.ackSelfClosing=!0}function Re(e,t){e._switchToTextParsing(t,o.MODE.RAWTEXT)}function ge(e,t){e.openElements.currentTagName===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML)}function ue(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,N.HTML)}function Le(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML)}function Ie(e,t){const n=t.tagName;switch(n.length){case 1:n===O.I||n===O.S||n===O.B||n===O.U?Ce(e,t):n===O.P?Oe(e,t):n===O.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(O.A);n&&($(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):Le(e,t);break;case 2:n===O.DL||n===O.OL||n===O.UL?Oe(e,t):n===O.H1||n===O.H2||n===O.H3||n===O.H4||n===O.H5||n===O.H6?function(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement();const n=e.openElements.currentTagName;n!==O.H1&&n!==O.H2&&n!==O.H3&&n!==O.H4&&n!==O.H5&&n!==O.H6||e.openElements.pop(),e._insertElement(t,N.HTML)}(e,t):n===O.LI||n===O.DD||n===O.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let o=e.openElements.stackTop;o>=0;o--){const t=e.openElements.items[o],s=e.treeAdapter.getTagName(t);let T=null;if(n===O.LI&&s===O.LI?T=O.LI:n!==O.DD&&n!==O.DT||s!==O.DD&&s!==O.DT||(T=s),T){e.openElements.generateImpliedEndTagsWithExclusion(T),e.openElements.popUntilTagNamePopped(T);break}if(s!==O.ADDRESS&&s!==O.DIV&&s!==O.P&&e._isSpecialElement(t))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML)}(e,t):n===O.EM||n===O.TT?Ce(e,t):n===O.BR?Me(e,t):n===O.HR?function(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,N.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):n===O.RB?ue(e,t):n===O.RT||n===O.RP?function(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,N.HTML)}(e,t):n!==O.TH&&n!==O.TD&&n!==O.TR&&Le(e,t);break;case 3:n===O.DIV||n===O.DIR||n===O.NAV?Oe(e,t):n===O.PRE?Ne(e,t):n===O.BIG?Ce(e,t):n===O.IMG||n===O.WBR?Me(e,t):n===O.XMP?function(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,o.MODE.RAWTEXT)}(e,t):n===O.SVG?function(e,t){e._reconstructActiveFormattingElements(),l.adjustTokenSVGAttrs(t),l.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,N.SVG):e._insertElement(t,N.SVG),t.ackSelfClosing=!0}(e,t):n===O.RTC?ue(e,t):n!==O.COL&&Le(e,t);break;case 4:n===O.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):n===O.BASE||n===O.LINK||n===O.META?ae(e,t):n===O.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):n===O.MAIN||n===O.MENU?Oe(e,t):n===O.FORM?function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML),n||(e.formElement=e.openElements.current))}(e,t):n===O.CODE||n===O.FONT?Ce(e,t):n===O.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&($(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,N.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):n===O.AREA?Me(e,t):n===O.MATH?function(e,t){e._reconstructActiveFormattingElements(),l.adjustTokenMathMLAttrs(t),l.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,N.MATHML):e._insertElement(t,N.MATHML),t.ackSelfClosing=!0}(e,t):n===O.MENU?function(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML)}(e,t):n!==O.HEAD&&Le(e,t);break;case 5:n===O.STYLE||n===O.TITLE?ae(e,t):n===O.ASIDE?Oe(e,t):n===O.SMALL?Ce(e,t):n===O.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==A.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML),e.framesetOk=!1,e.insertionMode=H}(e,t):n===O.EMBED?Me(e,t):n===O.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,N.HTML);const n=o.getTokenAttr(t,C.TYPE);n&&n.toLowerCase()===M||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):n===O.PARAM||n===O.TRACK?he(e,t):n===O.IMAGE?function(e,t){t.tagName=O.IMG,Me(e,t)}(e,t):n!==O.FRAME&&n!==O.TBODY&&n!==O.TFOOT&&n!==O.THEAD&&Le(e,t);break;case 6:n===O.SCRIPT?ae(e,t):n===O.CENTER||n===O.FIGURE||n===O.FOOTER||n===O.HEADER||n===O.HGROUP||n===O.DIALOG?Oe(e,t):n===O.BUTTON?function(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML),e.framesetOk=!1}(e,t):n===O.STRIKE||n===O.STRONG?Ce(e,t):n===O.APPLET||n===O.OBJECT?de(e,t):n===O.KEYGEN?Me(e,t):n===O.SOURCE?he(e,t):n===O.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,o.MODE.RAWTEXT)}(e,t):n===O.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,N.HTML),e.framesetOk=!1,e.insertionMode===H||e.insertionMode===k||e.insertionMode===K||e.insertionMode===F||e.insertionMode===B?e.insertionMode=b:e.insertionMode=U}(e,t):n===O.OPTION?ge(e,t):Le(e,t);break;case 7:n===O.BGSOUND?ae(e,t):n===O.DETAILS||n===O.ADDRESS||n===O.ARTICLE||n===O.SECTION||n===O.SUMMARY?Oe(e,t):n===O.LISTING?Ne(e,t):n===O.MARQUEE?de(e,t):n===O.NOEMBED?Re(e,t):n!==O.CAPTION&&Le(e,t);break;case 8:n===O.BASEFONT?ae(e,t):n===O.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,N.HTML),e.insertionMode=v)}(e,t):n===O.FIELDSET?Oe(e,t):n===O.TEXTAREA?function(e,t){e._insertElement(t,N.HTML),e.skipNextNewLine=!0,e.tokenizer.state=o.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=f}(e,t):n===O.TEMPLATE?ae(e,t):n===O.NOSCRIPT?e.options.scriptingEnabled?Re(e,t):Le(e,t):n===O.OPTGROUP?ge(e,t):n!==O.COLGROUP&&Le(e,t);break;case 9:n===O.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,N.HTML),e.tokenizer.state=o.MODE.PLAINTEXT}(e,t):Le(e,t);break;case 10:n===O.BLOCKQUOTE||n===O.FIGCAPTION?Oe(e,t):Le(e,t);break;default:Le(e,t)}}function Pe(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function fe(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function He(e,t){const n=t.tagName;for(let o=e.openElements.stackTop;o>0;o--){const t=e.openElements.items[o];if(e.treeAdapter.getTagName(t)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(t);break}if(e._isSpecialElement(t))break}}function Se(e,t){const n=t.tagName;switch(n.length){case 1:n===O.A||n===O.B||n===O.I||n===O.S||n===O.U?$(e,t):n===O.P?function(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(O.P),e._closePElement()}(e):He(e,t);break;case 2:n===O.DL||n===O.UL||n===O.OL?Pe(e,t):n===O.LI?function(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}(e):n===O.DD||n===O.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===O.H1||n===O.H2||n===O.H3||n===O.H4||n===O.H5||n===O.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===O.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(O.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===O.EM||n===O.TT?$(e,t):He(e,t);break;case 3:n===O.BIG?$(e,t):n===O.DIR||n===O.DIV||n===O.NAV||n===O.PRE?Pe(e,t):He(e,t);break;case 4:n===O.BODY?function(e){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=Y)}(e):n===O.HTML?function(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=Y,e._processToken(t))}(e,t):n===O.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):e.openElements.remove(n))}(e):n===O.CODE||n===O.FONT||n===O.NOBR?$(e,t):n===O.MAIN||n===O.MENU?Pe(e,t):He(e,t);break;case 5:n===O.ASIDE?Pe(e,t):n===O.SMALL?$(e,t):He(e,t);break;case 6:n===O.CENTER||n===O.FIGURE||n===O.FOOTER||n===O.HEADER||n===O.HGROUP||n===O.DIALOG?Pe(e,t):n===O.APPLET||n===O.OBJECT?fe(e,t):n===O.STRIKE||n===O.STRONG?$(e,t):He(e,t);break;case 7:n===O.ADDRESS||n===O.ARTICLE||n===O.DETAILS||n===O.SECTION||n===O.SUMMARY||n===O.LISTING?Pe(e,t):n===O.MARQUEE?fe(e,t):He(e,t);break;case 8:n===O.FIELDSET?Pe(e,t):n===O.TEMPLATE?pe(e,t):He(e,t);break;case 10:n===O.BLOCKQUOTE||n===O.FIGCAPTION?Pe(e,t):He(e,t);break;default:He(e,t)}}function ke(e,t){e.tmplInsertionModeStackTop>-1?ve(e,t):e.stopped=!0}function De(e,t){const n=e.openElements.currentTagName;n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=S,e._processToken(t)):Be(e,t)}function Ke(e,t){const n=t.tagName;switch(n.length){case 2:n===O.TD||n===O.TH||n===O.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(O.TBODY),e.insertionMode=K,e._processToken(t)}(e,t):Be(e,t);break;case 3:n===O.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(O.COLGROUP),e.insertionMode=D,e._processToken(t)}(e,t):Be(e,t);break;case 4:n===O.FORM?function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,N.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):Be(e,t);break;case 5:n===O.TABLE?function(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):n===O.STYLE?ae(e,t):n===O.TBODY||n===O.TFOOT||n===O.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,N.HTML),e.insertionMode=K}(e,t):n===O.INPUT?function(e,t){const n=o.getTokenAttr(t,C.TYPE);n&&n.toLowerCase()===M?e._appendElement(t,N.HTML):Be(e,t),t.ackSelfClosing=!0}(e,t):Be(e,t);break;case 6:n===O.SCRIPT?ae(e,t):Be(e,t);break;case 7:n===O.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,N.HTML),e.insertionMode=k}(e,t):Be(e,t);break;case 8:n===O.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,N.HTML),e.insertionMode=D}(e,t):n===O.TEMPLATE?ae(e,t):Be(e,t);break;default:Be(e,t)}}function Fe(e,t){const n=t.tagName;n===O.TABLE?e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode()):n===O.TEMPLATE?pe(e,t):n!==O.BODY&&n!==O.CAPTION&&n!==O.COL&&n!==O.COLGROUP&&n!==O.HTML&&n!==O.TBODY&&n!==O.TD&&n!==O.TFOOT&&n!==O.TH&&n!==O.THEAD&&n!==O.TR&&Be(e,t)}function Be(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function Ue(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Be(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function be(e,t){e.openElements.currentTagName===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=H,e._processToken(t))}function Ge(e,t){const n=t.tagName;n===O.HTML?Ie(e,t):n===O.OPTION?(e.openElements.currentTagName===O.OPTION&&e.openElements.pop(),e._insertElement(t,N.HTML)):n===O.OPTGROUP?(e.openElements.currentTagName===O.OPTION&&e.openElements.pop(),e.openElements.currentTagName===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,N.HTML)):n===O.INPUT||n===O.KEYGEN||n===O.TEXTAREA||n===O.SELECT?e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),n!==O.SELECT&&e._processToken(t)):n!==O.SCRIPT&&n!==O.TEMPLATE||ae(e,t)}function Ye(e,t){const n=t.tagName;if(n===O.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===O.OPTION&&n===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===O.OPTGROUP&&e.openElements.pop()}else n===O.OPTION?e.openElements.currentTagName===O.OPTION&&e.openElements.pop():n===O.SELECT&&e.openElements.hasInSelectScope(O.SELECT)?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode()):n===O.TEMPLATE&&pe(e,t)}function ve(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function xe(e,t){e.insertionMode=P,e._processToken(t)}function ye(e,t){e.insertionMode=P,e._processToken(t)}e.exports=class{constructor(e){this.options=p(d,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&i.install(this,E),this.options.onParseError&&i.install(this,r,{onParseError:this.options.onParseError})}parse(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}parseFragment(e,t){t||(t=this.treeAdapter.createElement(O.TEMPLATE,N.HTML,[]));const n=this.treeAdapter.createElement("documentmock",N.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===O.TEMPLATE&&this._pushTmplInsertionMode(G),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const o=this.treeAdapter.getFirstChild(n),s=this.treeAdapter.createDocumentFragment();return this._adoptNodes(o,s),s}_bootstrap(e,t){this.tokenizer=new o(this.options),this.stopped=!1,this.insertionMode=h,this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new s(this.document,this.treeAdapter),this.activeFormattingElements=new T(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===o.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===o.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==N.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,t){this._insertElement(e,N.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=f}switchToPlaintextParsing(){this.insertionMode=f,this.originalInsertionMode=P,this.tokenizer.state=o.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===O.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===N.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===O.TITLE||e===O.TEXTAREA?this.tokenizer.state=o.MODE.RCDATA:e===O.STYLE||e===O.XMP||e===O.IFRAME||e===O.NOEMBED||e===O.NOFRAMES||e===O.NOSCRIPT?this.tokenizer.state=o.MODE.RAWTEXT:e===O.SCRIPT?this.tokenizer.state=o.MODE.SCRIPT_DATA:e===O.PLAINTEXT&&(this.tokenizer.state=o.MODE.PLAINTEXT)}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",o=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,o)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}_insertFakeElement(e){const t=this.treeAdapter.createElement(e,N.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,N.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(O.HTML,N.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_shouldProcessTokenInForeignContent(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const n=this.treeAdapter.getNamespaceURI(t);if(n===N.HTML)return!1;if(this.treeAdapter.getTagName(t)===O.ANNOTATION_XML&&n===N.MATHML&&e.type===o.START_TAG_TOKEN&&e.tagName===O.SVG)return!1;const s=e.type===o.CHARACTER_TOKEN||e.type===o.NULL_CHARACTER_TOKEN||e.type===o.WHITESPACE_CHARACTER_TOKEN;return(!(e.type===o.START_TAG_TOKEN&&e.tagName!==O.MGLYPH&&e.tagName!==O.MALIGNMARK)&&!s||!this._isIntegrationPoint(t,N.MATHML))&&((e.type!==o.START_TAG_TOKEN&&!s||!this._isIntegrationPoint(t,N.HTML))&&e.type!==o.EOF_TOKEN)}_processToken(e){z[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){z.IN_BODY_MODE[e.type](this,e)}_processTokenInForeignContent(e){e.type===o.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===o.NULL_CHARACTER_TOKEN?function(e,t){t.chars=_.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===o.WHITESPACE_CHARACTER_TOKEN?se(this,e):e.type===o.COMMENT_TOKEN?ne(this,e):e.type===o.START_TAG_TOKEN?function(e,t){if(l.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==N.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),o=e.treeAdapter.getNamespaceURI(n);o===N.MATHML?l.adjustTokenMathMLAttrs(t):o===N.SVG&&(l.adjustTokenSVGTagName(t),l.adjustTokenSVGAttrs(t)),l.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,o):e._insertElement(t,o),t.ackSelfClosing=!0}}(this,e):e.type===o.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const o=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(o)===N.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(o).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(o);break}}}(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===o.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(c.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,t){const n=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e),s=this.treeAdapter.getAttrList(e);return l.isIntegrationPoint(n,o,s,t)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===T.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let o=t;o<e;o++)n=this.activeFormattingElements.entries[o],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=F}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const o=this.treeAdapter.getTagName(n),s=w[o];if(s){this.insertionMode=s;break}if(!(t||o!==O.TD&&o!==O.TH)){this.insertionMode=B;break}if(!t&&o===O.HEAD){this.insertionMode=u;break}if(o===O.SELECT){this._resetInsertionModeForSelect(e);break}if(o===O.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(o===O.HTML){this.insertionMode=this.headElement?I:g;break}if(t){this.insertionMode=P;break}}}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===O.TEMPLATE)break;if(n===O.TABLE)return void(this.insertionMode=b)}this.insertionMode=U}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const t=this.treeAdapter.getTagName(e);return t===O.TABLE||t===O.TBODY||t===O.TFOOT||t===O.THEAD||t===O.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],o=this.treeAdapter.getTagName(n),s=this.treeAdapter.getNamespaceURI(n);if(o===O.TEMPLATE&&s===N.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(o===O.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_fosterParentText(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}_isSpecialElement(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return A.SPECIAL_ELEMENTS[n][t]}}}}]);