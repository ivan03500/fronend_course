(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3140],{40735:function(t,e,r){"use strict";r.d(e,{zr:function(){return b},qD:function(){return w},oz:function(){return I},ge:function(){return q},uP:function(){return x},TF:function(){return M},ut:function(){return _}});var n=r(86420),a=r(67105),c=r(88742),i=r.n(c),s=r(40505),u=r(89631),o=r(6735),p=r(75855),l=r(60229),f=r(60312),v=r(44751),h=r(29511),y=r(87612),d=r(18419);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var b=(0,u.hg)("search/getSearchPage",function(){var t=(0,s.Z)(i().mark((function t(e,r){var n,a,c,s,u,o,p,l,f,v,y;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.q,a=e.type,c=e.limitTrack,s=e.limitMusicset,u=void 0===s?5:s,o=e.limitArtist,p=void 0===o?5:o,l=e.req,f=e.res,v=r.rejectWithValue,y=r.dispatch,t.prev=2,y((0,h.sP)(a)),y(T(n)),y(I(a)),t.t0=a,t.next="artist"===t.t0?9:"track"===t.t0?12:"musicset"===t.t0?15:18;break;case 9:return t.next=11,y(O({q:n,limitArtist:p,req:l,res:f}));case 11:return t.abrupt("return");case 12:return t.next=14,y(P({q:n,limitTrack:c,req:l,res:f}));case 14:return t.abrupt("return");case 15:return t.next=17,y(S({q:n,limitMusicset:u,req:l,res:f}));case 17:return t.abrupt("return");case 18:return t.next=20,y(k({q:n,limitTrack:c,limitMusicset:u,limitArtist:p,req:l,res:f}));case 20:return t.abrupt("return");case 21:t.next=26;break;case 23:return t.prev=23,t.t1=t.catch(2),t.abrupt("return",v(t.t1));case 26:case"end":return t.stop()}}),t,null,[[2,23]])})));return function(e,r){return t.apply(this,arguments)}}()),k=function(t){var e=t.q,r=t.limitTrack,c=t.limitMusicset,u=void 0===c?5:c,f=t.limitArtist,g=void 0===f?5:f,b=t.req,k=t.res;return function(){var t=(0,s.Z)(i().mark((function t(c){var s,f,P,S,O,w,j,A,I,T,q,x;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f=o.s.create(b,k),c((0,y.Q8)({onPage:{type:"search",typeId:e,page:1,pagesCount:1,list:[],limit:5,status:{succeeded:!1,failed:!1,pending:!0},error:null},url:"search_".concat((0,p.Az)(e))})),P="search_".concat((0,p.Az)(e)),c((0,v.MI)({playlist:P,status:{isLoading:!0,limit:r}})),t.next=7,f.getSearchPage(e,r,u,g);case 7:return S=t.sent,O=S.data,w=O.tracks,j=O.artists,A=O.musicsets,I=w.trackIds,T=w.tracksInfo,q=j.list.map((function(t){return"artist_".concat(t,"-popularity")})),x=null!==(s=A.onPage)&&void 0!==s&&s.list&&A.onPage.list.length?A.onPage.list.map((function(t){return"musicset_".concat(t)})):[],c((0,v.hx)((0,a.Z)({},P,I))),c((0,v.WY)([].concat((0,n.Z)(x),(0,n.Z)(q),[P]))),c((0,v.As)(m({},T))),c((0,h.Jc)()),c((0,y.Q8)(m(m({},A),{},{url:"search_".concat((0,p.Az)(e))}))),c((0,d.tb)(m(m({},j),{},{currentArtist:"search",typeId:e,limit:g}))),c((0,v.MI)({playlist:P,status:{page:w.page,pagesCount:w.pagesCount,limit:r,isLoading:!1}})),c(Z(O.popularInSearch)),t.abrupt("return",O);case 24:t.prev=24,t.t0=t.catch(0),(0,l.Z)(t.t0,"getSearchPageTypeAll - action/search.js");case 27:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e){return t.apply(this,arguments)}}()},P=function(t){var e=t.q,r=t.limitTrack,n=void 0===r?10:r,c=t.req,u=t.res;return function(){var t=(0,s.Z)(i().mark((function t(r){var s,f,y,d,g,b;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s="search_".concat((0,p.Az)(e)),r((0,v.MI)({playlist:s,status:{isLoading:!0,limit:n}})),f=o.s.create(c,u),t.next=6,f.getSearchTracks(e,1,n);case 6:return y=t.sent,d=y.data,g=d.tracksInfo,b=d.trackIds,r((0,v.hx)((0,a.Z)({},s,b))),r((0,v.WY)([s])),r((0,v.As)(m({},g))),r((0,h.Jc)()),r((0,v.MI)({playlist:s,status:{page:d.page,pagesCount:d.pagesCount,limit:n,isLoading:!1}})),r(Z(d.popularInSearch)),t.abrupt("return",d);case 18:t.prev=18,t.t0=t.catch(0),(0,l.Z)(t.t0,"getSearchPageTypeTrack - action/search.js");case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},S=function(t){var e=t.q,r=t.limitMusicset,a=void 0===r?5:r,c=t.req,u=t.res;return function(){var t=(0,s.Z)(i().mark((function t(r){var s,f,d,g,b;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r((0,y.Q8)({onPage:{type:"search",typeId:e,page:1,pagesCount:1,list:[],limit:a,status:{succeeded:!1,failed:!1,pending:!0},error:null},url:"search_".concat((0,p.Az)(e))})),f=o.s.create(c,u),t.next=5,f.getSearchMusicset(e,a);case 5:return d=t.sent,g=d.data,b=null!==(s=g.onPage)&&void 0!==s&&s.list&&g.onPage.list.length?g.onPage.list.map((function(t){return"musicset_".concat(t)})):[],r((0,v.WY)((0,n.Z)(b))),r((0,h.Jc)()),r((0,y.Q8)(m(m({},g),{},{url:"search_".concat((0,p.Az)(e))}))),r(Z(g.popularInSearch)),t.abrupt("return");case 15:t.prev=15,t.t0=t.catch(0),(0,l.Z)(t.t0,"getSearchPageTypeMusicset - action/search.js");case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},O=function(t){var e=t.q,r=t.limitArtist,n=void 0===r?8:r,a=t.req,c=t.res;return function(){var t=(0,s.Z)(i().mark((function t(r){var s,u,p,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=o.s.create(a,c),t.next=4,s.getSearchArtists(e,1,n);case 4:return u=t.sent,null!==(p=u.data)&&void 0!==p&&p.list&&(f=p.list.map((function(t){return"artist_".concat(t,"-popularity")})),r((0,v.Cs)(f))),r((0,h.Jc)()),r((0,d.tb)(m(m({},p),{},{currentArtist:"search",typeId:e,limit:n}))),r(Z(p.popularInSearch)),t.abrupt("return");case 13:t.prev=13,t.t0=t.catch(0),(0,l.Z)(t.t0,"getSearchPageTypeArtist - action/search.js");case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},w=function(){return function(){var t=(0,s.Z)(i().mark((function t(e,r){var c,s,u,h,y,d,g,m,b,k,P,S;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=r(),s=c.playlist.trackIds,u=c.search.query,h="search_".concat((0,p.Az)(u)),y=r().playlist.status[h],d=y.page,g=y.limit,e((0,v.MI)({playlist:h,status:{isLoading:!0,limit:g}})),t.next=7,o.Z.getSearchTracks(u,d+1,g);case 7:return m=t.sent,b=m.data,k=b.trackIds,P=b.tracksInfo,S=(0,a.Z)({},h,[].concat((0,n.Z)(s[h]),(0,n.Z)(k))),e((0,v.hx)(S)),e((0,f.LQ)()),e((0,v.As)(P)),e((0,v.K9)()),e((0,v.MI)({playlist:h,status:{page:b.page,pagesCount:b.pagesCount,limit:g,isLoading:!1}})),e(Z(b.popularInSearch)),t.abrupt("return",b);case 20:t.prev=20,t.t0=t.catch(0),(0,l.Z)(t.t0,"updateSearchTracks - action/search.js");case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e,r){return t.apply(this,arguments)}}()},j=(0,u.oM)({name:"search",initialState:{searchType:"all",query:"",popularInSearch:!1,suggests:[],error:null},reducers:{setSearchType:function(t,e){var r=e.payload;t.searchType=r},setSearchQuery:function(t,e){var r=e.payload;t.query=r},setPopularInSearch:function(t,e){var r=e.payload;t.popularInSearch=r}}}),A=j.actions,I=A.setSearchType,T=A.setSearchQuery,Z=A.setPopularInSearch;e.ZP=j.reducer;var q=function(t){return t.search.searchType},x=function(t){return t.search.query},M=function(t){return t.search.popularInSearch},_=function(t){var e,r,n=t.search,a=n.searchType,c=n.query,i="search_".concat((0,p.Az)(c));if("musicset"===a)return!1;var s=function(e){for(var r=0;r<(null===e||void 0===e?void 0:e.length);r++){var n,a;if(null!==(n=t.playlist)&&void 0!==n&&null!==(a=n.info[e[r]])&&void 0!==a&&a.isArtistForeignAgent)return!0}return!1}(t.playlist.trackIds[i]),u=function(e){for(var r=0;r<(null===e||void 0===e?void 0:e.length);r++){var n,a;if(null!==(n=t.artist)&&void 0!==n&&null!==(a=n.info[e[r]])&&void 0!==a&&a.isForeignArtist)return!0}return!1}(null===(e=t.artist)||void 0===e||null===(r=e.onPage.search)||void 0===r?void 0:r.list);return"track"===a?s:"artist"===a?u:s||u}},57231:function(t,e,r){"use strict";r.d(e,{H7:function(){return u},KG:function(){return o},Uu:function(){return p},Mt:function(){return l},De:function(){return f}});var n=r(67105);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var i=(0,r(89631).oM)({name:"sort",initialState:{sortTypes:{genres:[{type:"popularity",name:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",link:""},{type:"new",name:"\u041d\u043e\u0432\u0438\u043d\u043a\u0438",link:"new"}],popular:[{name:"\u0417\u0430 \u0434\u0435\u043d\u044c",type:"day",link:""},{name:"\u0417\u0430 \u043d\u0435\u0434\u0435\u043b\u044e",type:"week",link:"week"},{name:"\u0417\u0430 \u043c\u0435\u0441\u044f\u0446",type:"month",link:"month"}],artist:[{type:"popularity",name:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",link:""},{type:"new",name:"\u041d\u043e\u0432\u0438\u043d\u043a\u0438",link:"new"},{type:"alphabet",name:"\u041f\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443",link:"alphabet"}],artistList:[{type:"popularity",name:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",link:""},{type:"alphabet",name:"\u041f\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443",link:"alphabet"}]},activeSortType:{genres:"popularity",popular:"day",artist:"popularity",artistList:"popularity"},activeFilter:{artistList:{genre:"",letter:""}},status:{succeeded:!1,pending:!1,failed:!1},error:null},reducers:{setActiveSort:function(t,e){var r=e.payload;t.activeSortType=c(c({},t.activeSortType),{},(0,n.Z)({},r.page,r.activeType))},setActiveFilter:function(t,e){var r=e.payload;t.activeFilter=c(c({},t.activeFilter),{},(0,n.Z)({},r.page,r.activeType))}}});e.ZP=i.reducer;var s=i.actions,u=s.setActiveSort,o=s.setActiveFilter,p=function(t){return function(e){var r;return null===e||void 0===e||null===(r=e.sort)||void 0===r?void 0:r.activeSortType[t]}},l=function(t){return function(e){return e.sort.sortTypes[t]}},f=function(t){return function(e){var r;return null===e||void 0===e||null===(r=e.sort)||void 0===r?void 0:r.activeFilter[t]}}}}]);