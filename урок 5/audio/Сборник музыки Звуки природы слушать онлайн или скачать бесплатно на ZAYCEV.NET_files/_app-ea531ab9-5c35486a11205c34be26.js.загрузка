(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8232],{6735:function(e,t,a){"use strict";a.d(t,{s:function(){return P}});var i=a(88742),r=a.n(i),s=a(40505),n=a(83101),o=a(76982),u=a(67105),c=a(86677),p=a(14206),h=a.n(p),l=a(28389),g=a(75855),d=a(88319),k=a.n(d),f=a(15798),v=a(87686),m=a(23541),y=a.n(m);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=function(){function e(t,a,i){var o=this;(0,n.Z)(this,e),(0,u.Z)(this,"api",void 0),(0,u.Z)(this,"tokens",void 0),(0,u.Z)(this,"req",void 0),(0,u.Z)(this,"res",void 0),this.api=t,this.req=a,this.res=i,this.tokens=[],this.api.defaults.withCredentials=!0,this.api.defaults.baseURL="".concat(g.sk?l.gH:l.QG,"/api/external"),this.api.interceptors.request.use((function(e){if(o.req&&o.res){var t=o.res.getHeader("set-cookie");e.headers=o.req.headers,e.headers.cookie=t?function(e,t){var a=b(b({},null===t||void 0===t?void 0:t.split(";").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0].trim()]=t[1].trim(),e}),{})),function(){if(void 0===e||"number"===typeof e)return{};var t=k().parse(e,{map:!0});return Object.keys(t).reduce((function(e,a){return e[a]=t[a].value,e}),{})}());return Object.keys(a).map((function(e){return"".concat(e,"=").concat(a[e])})).join("; ")}(t,o.req.headers.cookie):o.req.headers.cookie}return e})),this.api.interceptors.response.use((function(e){var t=e.data;if(o.res){var a,i,r=e.headers;r["set-cookie"]&&o.res.setHeader("set-cookie",r["set-cookie"]),o.res.setHeader("Last-Modified",y()(v.Y.replace(/buildId_/,""))),null!==(a=t.info)&&void 0!==a&&a.lastStamp&&o.res.setHeader("Last-Modified",t.info.lastStamp),null!==(i=t.info)&&void 0!==i&&i.created&&o.res.setHeader("Last-Modified",t.info.created)}var s=null===t||void 0===t?void 0:t.redirect;return s&&(o.res?o.res.writeHead(301,{Location:s}).end():c.default.push(s)),e}),function(){var e=(0,s.Z)(r().mark((function e(t){var a,i,s,n,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.config,401!==(null===(a=t.response)||void 0===a?void 0:a.status)||s.isRetried){e.next=12;break}return s.isRetried=!0,e.prev=3,e.next=6,o.refreshTokens();case 6:return e.abrupt("return",o.api(s));case 9:e.prev=9,e.t0=e.catch(3),422===(null===(n=e.t0.response)||void 0===n?void 0:n.status)&&(u=e.t0.response.headers)["set-cookie"]&&o.res&&o.res.setHeader("set-cookie",u["set-cookie"]);case 12:return o.req&&(o.req.serverRenderStatus=(null===(i=t.response)||void 0===i?void 0:i.status)||404),e.abrupt("return",Promise.reject(t));case 14:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}())}return(0,o.Z)(e,[{key:"addCancellationToken",value:function(e){this.tokens.push(e)}},{key:"cancelRequests",value:function(e){this.tokens=this.tokens.reduce((function(t,a){var i=a.key,r=a.event;return i===e&&r?r():t.push({key:i,event:r}),t}),[])}},{key:"refreshTokens",value:function(){return this.api.get("auth/refresh")}},{key:"getUserInfo",value:function(){return this.api.get("auth/info")}},{key:"getCaptchaScore",value:function(e){return this.api.post("services/recaptcha",{token:e})}},{key:"getArtistItemPageById",value:function(e,t,a,i){return this.api.get("pages/artist/".concat(e),{params:{page:1,sort:t,limit:a,source:i}})}},{key:"getTracksArtistById",value:function(e,t,a,i){return this.api.get("pages/artist/".concat(e,"/tracks"),{params:{page:t,sort:a,limit:i}})}},{key:"getSimilarArtist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.api.get("pages/artist/".concat(e,"/similar"),{params:{page:t}})}},{key:"getFeatTracksArtistById",value:function(e,t,a,i){return this.api.get("pages/artist/".concat(e,"/feat-tracks"),{params:{page:t,sort:a,limit:i}})}},{key:"getArtistPhoto",value:function(e,t){return this.api.get("pages/artist/".concat(e,"/photos"),{params:{page:t}})}},{key:"getTracklistMusicsetByUrl",value:function(e){return this.api.get("pages/musicset/tracks",{params:{url:e}})}},{key:"getTrackPageById",value:function(e,t,a,i){return this.api.get("pages/track",{params:{page:1,id:e,limit:t,limitPopular:a,limitMusicset:i}})}},{key:"getNewPage",value:function(e,t,a){return this.api.get("pages/new",{params:{page:e,limit:t,limitRecommended:a}})}},{key:"getCheckedTracks",value:function(e,t){return this.api.post("track/filezmeta",{trackIds:e,subscription:t})}},{key:"getTracksInfo",value:function(e,t){return this.api.post("track/tracks/info",{tracksList:e,source:t})}},{key:"getTrackPlayInfoByHash",value:function(e){return this.api.get("track/play/".concat(e))}},{key:"sendPlayEvent",value:function(e){return this.api({baseURL:"https://zaycev.net/clickmeter?action=play&device=".concat(e?"mobile":"desktop"),method:"POST"})}},{key:"sendDownloadEvent",value:function(e){return this.api({baseURL:"https://zaycev.net/clickmeter?action=download&device=".concat(e?"mobile":"desktop"),method:"POST"})}},{key:"getAudiobooksCategoriesData",value:function(e){return this.api.get("audiobooks/genres",{params:{url:e}})}},{key:"getAudiobooksListData",value:function(e,t,a,i){return this.api.get("audiobooks/list/",{params:{urls:e,page:t,limit:a,isGenre:i}})}},{key:"setSearchList",value:function(e,t,a){return this.api.get("audiobooks/search",{params:{q:e,limitAuthors:t,limitBooks:a}})}},{key:"updateSearchAuthorsList",value:function(e,t,a){return this.api.get("audiobooks/search/authors",{params:{q:e,page:t,limit:a}})}},{key:"updateSearchBooksList",value:function(e,t,a){return this.api.get("audiobooks/search/books",{params:{q:e,page:t,limit:a}})}},{key:"setAuthorList",value:function(e,t,a){return this.api.get("audiobooks/author",{params:{id:e,page:t,limit:a}})}},{key:"updateAuthorList",value:function(e,t,a){return this.api.get("audiobooks/author",{params:{id:e,page:t,limit:a}})}},{key:"setBookList",value:function(e,t){return this.api.get("audiobooks/book",{params:{id:e,limit:t}})}},{key:"getMusicsetsListForPage",value:function(e,t,a,i){return this.api.get("pages/musicset",{params:{type:e,limit:t,page:a,query:i}})}},{key:"getMusicsetsListPage",value:function(e,t,a){return this.api.get("pages/musicset/list",{params:{limit:e,page:t,query:a}})}},{key:"getMusicsetsItemPage",value:function(e,t){return this.api.get("pages/musicset/item",{params:{limitMusicsets:e,url:t}})}},{key:"getMusicsetSortList",value:function(){return this.api.get("pages/musicset/categories/readAll")}},{key:"getMusicsetsInfo",value:function(e){return this.api.get("pages/musicset/info",{params:{urls:e.toString()}})}},{key:"getIndexPage",value:function(e,t,a,i,r,s,n,o,u,c){return this.api.get("pages/index",{params:{page:e,limit:o,limitRecommended:i,limitPopular:r,limitNewTracks:s,limitMusicset:t,limitArtist:n,musicsetsCategories:JSON.stringify(a),entity:u,period:c}})}},{key:"getArtistsPage",value:function(e,t,a,i,r,s){return this.api.get("pages/artist/",{params:{letter:e,page:t,limit:a,sort:i,source:s,genre:r}})}},{key:"getSearchPage",value:function(e,t,a,i){return this.api.get("pages/search",{params:{q:e,limitTrack:t,limitMusicset:a,limitArtist:i}})}},{key:"getSearchArtists",value:function(e,t,a){return this.api.get("pages/search/artists",{params:{q:e,page:t,limit:a}})}},{key:"getSearchTracks",value:function(e,t,a){return this.api.get("pages/search/tracks",{params:{q:e,page:t,limit:a}})}},{key:"getSearchMusicset",value:function(e,t){return this.api.get("pages/search/musicsets",{params:{q:e,limit:t}})}},{key:"getSearchSuggest",value:function(e,t){return this.api.get("suggest",{params:{suggest:e,count:t}})}},{key:"getSpagesData",value:function(e){return this.api.get("pages/spages/",{params:{url:e}})}},{key:"sendEvent",value:function(e){return this.api.post("eventconsumer",e)}},{key:"updatePopular",value:function(e,t,a,i){return this.api.get("pages/index/top",{params:{page:e,limit:t,period:a,entity:i}})}},{key:"getVkAuth",value:function(e,t){return this.api.get("auth/social/vk",{params:{code:e,host:t}})}},{key:"getGoogleAuth",value:function(e,t){return this.api.get("auth/social/google",{params:{code:e,host:t}})}},{key:"getOkAuth",value:function(e,t){return this.api.get("auth/social/ok",{params:{code:e,host:t}})}},{key:"getFbAuth",value:function(e,t){return this.api.get("auth/social/fb",{params:{code:e,host:t}})}},{key:"getYandexAuth",value:function(e){return this.api.get("auth/social/ya",{params:{code:e}})}},{key:"getGenresPage",value:function(){return this.api.get("pages/genres")}},{key:"getGenresTracks",value:function(e,t,a,i){return this.api.get("pages/genres/".concat(i,"/tracks"),{params:{limit:a,page:t,sort:e}})}},{key:"getGenresMusicsets",value:function(e,t,a){return this.api.get("pages/genres/".concat(t,"/musicsets"),{params:{limit:a,page:e}})}},{key:"getSubgenresApi",value:function(e){return this.api.get("pages/genres/".concat(e,"/subgenres"))}},{key:"getGenreItemInfo",value:function(e,t,a,i,r){return this.api.get("pages/genres/".concat(e,"/info"),{params:{url:e,trackLimit:t,artistLimit:a,musicsetLimit:i,sort:r}})}},{key:"getTrackDownloadUrl",value:function(e){return this.api.get("track/download/".concat(e))}},{key:"getNewYearStatistic",value:function(){return this.api.get("pages/statistic")}},{key:"getNewsArticles",value:function(e){return this.api.get("news/articles/".concat(e))}},{key:"getNewsArticleVideo",value:function(e){return this.api.get("video/".concat(e))}},{key:"getVideoAdv",value:function(){return this.api.get("news/videoAdv")}},{key:"getNewsArticlesWidget",value:function(e,t){return this.api.get("news/articles/widget",{params:{startPos:e,limit:t}})}},{key:"getNewsArticlesRelevant",value:function(e,t){return this.api.get("news/articles/relevant",{params:{size:e,isNew:t}})}},{key:"logout",value:function(){return this.api.get("auth/logout")}},{key:"login",value:function(e,t){return this.api.post("auth/login",{emailOrLogin:e,password:t})}},{key:"changePhoneCode",value:function(e,t,a){return this.api.post("auth/profile/phone/changePhone",{phone:e,password:t,code:a})}},{key:"changePhonePush",value:function(e,t){return this.api.post("auth/profile/phone/changePhone",{password:e,authReqId:t})}},{key:"changePhone",value:function(e,t,a,i){return this.api.post("auth/profile/phone/changePhone",{phone:e,password:t,authReqId:a,code:i})}},{key:"addPhone",value:function(e,t){return this.api.post("auth/profile/phone/addPhone",{phone:e,code:t})}},{key:"checkCode",value:function(e,t){return this.api.get("auth/phone/checkcode",{params:{phone:e,code:t}})}},{key:"enterPhone",value:function(e,t){return this.api.post("auth/phone/enter",{phone:e,password:t})}},{key:"validatePhone",value:function(e){return this.api.get("auth/phone/validate",{params:{phone:e}})}},{key:"approvePhoneCode",value:function(e,t,a){return this.api.post("auth/phone/changepassword/code",{phone:e,code:t,password:a})}},{key:"approvePhonePush",value:function(e,t){return this.api.post("auth/phone/changepassword/push",{authReqId:e,password:t})}},{key:"confirmEmail",value:function(e){return this.api.post("auth/profile/email/confirm",{hash:e})}},{key:"checkEmail",value:function(e){return this.api.get("auth/registration/checkEmail",{params:{email:e}})}},{key:"changeEmail",value:function(e,t){return this.api.post("auth/profile/email/changeEmail",{password:e,email:t})}},{key:"checkLogin",value:function(e){return this.api.get("auth/profile/login/checkLogin",{params:{login:e}})}},{key:"changeLogin",value:function(e,t){return this.api.post("auth/profile/login/changeLogin",{password:e,login:t})}},{key:"changePhoto",value:function(e){return this.api.post("auth/profile/photo/changePhoto",e)}},{key:"removePhoto",value:function(){return this.api.get("auth/profile/photo/removePhoto")}},{key:"changePassword",value:function(e,t){return this.api.post("auth/profile/password/changePassword",{passwordOld:e,passwordNew:t})}},{key:"changeProfileInfo",value:function(e,t,a,i,r){return this.api.post("auth/profile/info/changeInfo",{name:e,login:t,email:a,phone:i,confirmPassword:r})}},{key:"changeName",value:function(e){return this.api.post("auth/profile/name/changeName",{name:e})}},{key:"checkPassword",value:function(e){return this.api.get("auth/profile/password/checkPassword",{params:{password:e}})}},{key:"sendPromoCode",value:function(e){return this.api.post("auth/promo",{code:e})}},{key:"checkHashForAprove",value:function(e,t){return this.api.get("auth/registration/checkHash",{params:{id:e,hash:t}})}},{key:"checkHashForNewPassword",value:function(e){return this.api.get("auth/resetPassword/checkHash",{params:{hash:e}})}},{key:"approveRegistration",value:function(e,t){return this.api.post("auth/registration/approve",{id:e,hash:t})}},{key:"resetPassword",value:function(e){return this.api.get("auth/resetPassword/email",{params:{email:e}})}},{key:"passSubscriptionMegafonCode",value:function(e,t){return this.api.get("auth/profile/subscription/megafon/code",{params:{phone:e,code:t}})}},{key:"sendSubscriptionMegafonCode",value:function(e){return this.api.get("auth/profile/subscription/megafon/phone",{params:{phone:e}})}},{key:"registerByRequestId",value:function(e,t,a){return this.api.post("auth/registration",{authReqId:e,name:t,password:a})}},{key:"registerBySms",value:function(e,t,a,i){return this.api.post("auth/registration",{code:e,password:t,phone:a,name:i})}},{key:"registerByEmail",value:function(e,t,a){return this.api.post("auth/registration",{email:e,password:t,name:a})}},{key:"sendPhonePush",value:function(e,t){return this.api.get("auth/phone/pushSend",{params:{phone:e,token:t}})}},{key:"sendPhoneConfirm",value:function(e,t,a){return this.api.get("auth/phone/code",{params:{phone:e,token:t,type:a}})}},{key:"approveResetPassword",value:function(e,t){return this.api.post("auth/resetPassword/approve/",{hash:e,password:t})}},{key:"subscribeMegafon",value:function(){return this.api.get("auth/profile/subscription/megafon/getSubscription")}},{key:"changeAutoRenewing",value:function(e,t){return this.api.post("auth/profile/subscription/changeAutoRenewing",{on:e,id:t})}},{key:"getStockSubscription",value:function(){return this.api.get("auth/profile/subscription/getStockSubscription")}},{key:"getSubscription",value:function(){return this.api.get("auth/profile/subscription/getSubscription")}},{key:"getYearSubscription",value:function(){return this.api.get("auth/profile/subscription/getYearSubscription")}},{key:"sendError",value:function(e,t,a,i){return this.api({baseURL:l.kj,method:"POST",data:{type:e,service:t,place:a,message:i}})}},{key:"getRotator",value:function(e,t){var a=this;return this.api({baseURL:"https://rttr2.zaycev.net/api/single?t=".concat(e),cancelToken:new(h().CancelToken)((function(e){return a.addCancellationToken({key:t,event:e})}))})}},{key:"getMusicsetDownloadUrl",value:function(e){return this.api.get("pages/musicset/download/".concat(e))}},{key:"getRecommendedTracksList",value:function(e){return this.api.get("pages/index/recommended",{params:{limit:e}})}},{key:"getPlaylistOfDay",value:function(e){var t=(0,f.parseCookies)().user_id;return this.api.get("playlist",{params:{personId:e,globalId:t}})}},{key:"getLottery",value:function(e){return this.api.get("news/lotteries/".concat(e))}},{key:"getLotteryResult",value:function(e,t){return this.api.get("news/lotteries/result",{params:{lotteryId:e,personId:t}})}},{key:"sendLotteryResult",value:function(e,t,a,i,r,s){return this.api.post("news/lotteries/result",{},{params:{lotteryId:e,personId:a,result:t,name:s,phone:r,email:i}})}}],[{key:"create",value:function(t,a){return new e(h().create(),t,a)}}]),e}(),S=P.create();t.Z=S}}]);