!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var o=(s=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(l," */")),r=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[i].concat(r).concat([o]).join("\n")}var s,a,l;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);n&&o[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},function(t,e,i){(function(t){var e;!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};e[s][0].call(u.exports,(function(t){var i=e[s][1][t];return o(i||t)}),u,u.exports,t,e,i,n)}return i[s].exports}for(var r=!1,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){var n,o=e.exports={},r=[],s=!1,a=-1;function l(){s=!1,n.length?r=n.concat(r):a=-1,r.length&&u()}function u(){if(!s){var t=setTimeout(l);s=!0;for(var e=r.length;e;){for(n=r,r=[];++a<e;)n&&n[a].run();a=-1,e=r.length}n=null,s=!1,clearTimeout(t)}}function c(t,e){this.fun=t,this.array=e}function h(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.push(new c(t,e)),1!==r.length||s||setTimeout(u,0)},c.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(n,o,r){(function(n){
/**
 * @module vow
 * @author Filatov Dmitry <dfilatov@yandex-team.ru>
 * @version 0.4.10
 * @license
 * Dual licensed under the MIT and GPL licenses:
 *   * http://www.opensource.org/licenses/mit-license.php
 *   * http://www.gnu.org/licenses/gpl.html
 */
!function(s){var a=function(){var e=[],i=function(t){return 1===e.push(t)},o=function(){var t=e,i=0,n=e.length;for(e=[];i<n;)t[i++]()};if("function"==typeof t)return function(e){i(e)&&t(o)};if("object"==typeof n&&n.nextTick)return function(t){i(t)&&n.nextTick(o)};var r=s.MutationObserver||s.WebKitMutationObserver;if(r){var a=1,l=document.createTextNode("");return new r(o).observe(l,{characterData:!0}),function(t){i(t)&&(l.data=a*=-1)}}if(s.postMessage){var u=!0;if(s.attachEvent){var c=function(){u=!1};s.attachEvent("onmessage",c),s.postMessage("__checkAsync","*"),s.detachEvent("onmessage",c)}if(u){var h="__promise"+ +new Date,p=function(t){t.data===h&&(t.stopPropagation&&t.stopPropagation(),o())};return s.addEventListener?s.addEventListener("message",p,!0):s.attachEvent("onmessage",p),function(t){i(t)&&s.postMessage(h,"*")}}}var d=s.document;if("onreadystatechange"in d.createElement("script")){return function(t){var e;i(t)&&((e=d.createElement("script")).onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,o()},(d.documentElement||d.body).appendChild(e))}}return function(t){i(t)&&setTimeout(o,0)}}(),l=function(t){a((function(){throw t}))},u=function(t){return"function"==typeof t},c=function(t){return null!==t&&"object"==typeof t},h=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===h.call(t)},d=function(t){for(var e=[],i=0,n=t.length;i<n;)e.push(i++);return e},f=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},_=function(t,e){return function(i){t.call(this,i,e)}},b=function(){this._promise=new g};b.prototype={promise:function(){return this._promise},resolve:function(t){this._promise.isResolved()||this._promise._resolve(t)},reject:function(t){this._promise.isResolved()||(N.isPromise(t)?(t=t.then((function(t){var e=N.defer();return e.reject(t),e.promise()})),this._promise._resolve(t)):this._promise._reject(t))},notify:function(t){this._promise.isResolved()||this._promise._notify(t)}};var m=0,y=1,E=2,v=3,g=function(t){if(this._value=void 0,this._status=m,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],t){var e=this,i=t.length;t((function(t){e.isResolved()||e._resolve(t)}),i>1?function(t){e.isResolved()||e._reject(t)}:void 0,i>2?function(t){e.isResolved()||e._notify(t)}:void 0)}};g.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==m},isFulfilled:function(){return this._status===E},isRejected:function(){return this._status===v},then:function(t,e,i,n){var o=new b;return this._addCallbacks(o,t,e,i,n),o.promise()},catch:function(t,e){return this.then(void 0,t,e)},fail:function(t,e){return this.then(void 0,t,e)},always:function(t,e){var i=this,n=function(){return t.call(this,i)};return this.then(n,n,e)},progress:function(t,e){return this.then(void 0,void 0,t,e)},spread:function(t,e,i){return this.then((function(e){return t.apply(this,e)}),e,i)},done:function(t,e,i,n){this.then(t,e,i,n).fail(l)},delay:function(t){var e,i=this.then((function(i){var n=new b;return e=setTimeout((function(){n.resolve(i)}),t),n.promise()}));return i.always((function(){clearTimeout(e)})),i},timeout:function(t){var e=new b,i=setTimeout((function(){e.reject(new N.TimedOutError("timed out"))}),t);return this.then((function(t){e.resolve(t)}),(function(t){e.reject(t)})),e.promise().always((function(){clearTimeout(i)})),e.promise()},_vow:!0,_resolve:function(t){if(!(this._status>y))if(t!==this)if(this._status=y,t&&t._vow)t.isFulfilled()?this._fulfill(t.valueOf()):t.isRejected()?this._reject(t.valueOf()):t.then(this._fulfill,this._reject,this._notify,this);else{if(c(t)||u(t)){var e;try{e=t.then}catch(t){return void this._reject(t)}if(u(e)){var i=this,n=!1;try{e.call(t,(function(t){n||(n=!0,i._resolve(t))}),(function(t){n||(n=!0,i._reject(t))}),(function(t){i._notify(t)}))}catch(t){n||this._reject(t)}return}}this._fulfill(t)}else this._reject(TypeError("Can't resolve promise with itself"))},_fulfill:function(t){this._status>y||(this._status=E,this._value=t,this._callCallbacks(this._fulfilledCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},_reject:function(t){this._status>y||(this._status=v,this._value=t,this._callCallbacks(this._rejectedCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},_notify:function(t){this._callCallbacks(this._progressCallbacks,t)},_addCallbacks:function(t,e,i,n,o){var r;i&&!u(i)?(o=i,i=void 0):n&&!u(n)&&(o=n,n=void 0),this.isRejected()||(r={defer:t,fn:u(e)?e:void 0,ctx:o},this.isFulfilled()?this._callCallbacks([r],this._value):this._fulfilledCallbacks.push(r)),this.isFulfilled()||(r={defer:t,fn:i,ctx:o},this.isRejected()?this._callCallbacks([r],this._value):this._rejectedCallbacks.push(r)),this._status<=y&&this._progressCallbacks.push({defer:t,fn:n,ctx:o})},_callCallbacks:function(t,e){var i=t.length;if(i){var n=this.isResolved(),o=this.isFulfilled();a((function(){for(var r,s,a,l=0;l<i;)if(s=(r=t[l++]).defer,a=r.fn){var u,c=r.ctx;try{u=c?a.call(c,e):a(e)}catch(t){s.reject(t);continue}n?s.resolve(u):s.notify(u)}else n?o?s.resolve(e):s.reject(e):s.notify(e)}))}}};var T={cast:function(t){return N.cast(t)},all:function(t){return N.all(t)},race:function(t){return N.anyResolved(t)},resolve:function(t){return N.resolve(t)},reject:function(t){return N.reject(t)}};for(var w in T)T.hasOwnProperty(w)&&(g[w]=T[w]);var k,A,N={Deferred:b,Promise:g,defer:function(){return new b},when:function(t,e,i,n,o){return N.cast(t).then(e,i,n,o)},fail:function(t,e,i){return N.when(t,void 0,e,i)},always:function(t,e,i){return N.when(t).always(e,i)},progress:function(t,e,i){return N.when(t).progress(e,i)},spread:function(t,e,i,n){return N.when(t).spread(e,i,n)},done:function(t,e,i,n,o){N.when(t).done(e,i,n,o)},isPromise:function(t){return c(t)&&u(t.then)},cast:function(t){return t&&t._vow?t:N.resolve(t)},valueOf:function(t){return t&&u(t.valueOf)?t.valueOf():t},isFulfilled:function(t){return!t||!u(t.isFulfilled)||t.isFulfilled()},isRejected:function(t){return!(!t||!u(t.isRejected))&&t.isRejected()},isResolved:function(t){return!t||!u(t.isResolved)||t.isResolved()},resolve:function(t){var e=N.defer();return e.resolve(t),e.promise()},fulfill:function(t){var e=N.defer(),i=e.promise();return e.resolve(t),i.isFulfilled()?i:i.then(null,(function(t){return t}))},reject:function(t){var e=N.defer();return e.reject(t),e.promise()},invoke:function(t,e){var i,n=Math.max(arguments.length-1,0);if(n){i=Array(n);for(var o=0;o<n;)i[o++]=arguments[o]}try{return N.resolve(i?t.apply(s,i):t.call(s))}catch(t){return N.reject(t)}},all:function(t){var e=new b,i=p(t),n=i?d(t):f(t),o=n.length,r=i?[]:{};if(!o)return e.resolve(r),e.promise();var s=o;return N._forEach(t,(function(t,i){r[n[i]]=t,--s||e.resolve(r)}),e.reject,e.notify,e,n),e.promise()},allResolved:function(t){var e=new b,i=p(t),n=i?d(t):f(t),o=n.length,r=i?[]:{};if(!o)return e.resolve(r),e.promise();var s=function(){--o||e.resolve(t)};return N._forEach(t,s,s,e.notify,e,n),e.promise()},allPatiently:function(t){return N.allResolved(t).then((function(){var e,i,n,o,r=p(t),s=r?d(t):f(t),a=s.length,l=0;if(!a)return r?[]:{};for(;l<a;)n=s[l++],o=t[n],N.isRejected(o)?(e||(e=r?[]:{}),r?e.push(o.valueOf()):e[n]=o.valueOf()):e||((i||(i=r?[]:{}))[n]=N.valueOf(o));if(e)throw e;return i}))},any:function(t){var e=new b,i=t.length;if(!i)return e.reject(Error()),e.promise();var n,o=0;return N._forEach(t,e.resolve,(function(t){o||(n=t),++o===i&&e.reject(n)}),e.notify,e),e.promise()},anyResolved:function(t){var e=new b;return t.length?(N._forEach(t,e.resolve,e.reject,e.notify,e),e.promise()):(e.reject(Error()),e.promise())},delay:function(t,e){return N.resolve(t).delay(e)},timeout:function(t,e){return N.resolve(t).timeout(e)},_forEach:function(t,e,i,n,o,r){for(var s=r?r.length:t.length,a=0;a<s;)N.when(t[r?r[a]:a],_(e,a),i,n,o),++a},TimedOutError:(k="TimedOut",A=function(t){this.name=k,this.message=t},A.prototype=new Error,A)};"object"==typeof o&&"object"==typeof o.exports&&(o.exports=N),"object"==typeof modules&&u(modules.define)&&modules.define("vow",(function(t){t(N)})),void 0===(e=function(t,e,i){i.exports=N}.call(r,i,r,o))||(o.exports=e),!1&&(s.vow=N)}(this)}).call(this,n("_process"))},{_process:1}],3:[function(t,e,i){var n=new(t("./logger/logger"))("Audio"),o=t("./lib/async/events"),r=t("./lib/async/promise"),s=t("./lib/async/deferred"),a=t("./lib/browser/detect"),l=t("./config"),u=t("./lib/data/merge"),c=t("./lib/async/reject"),h=t("./error/audio-error"),p=t("./audio-static"),d=1,f={html5:t("./html5/audio-html5"),flash:t("./flash/audio-flash")},_="@"+a.platform.version+" "+a.platform.os+":"+a.browser.name+"/"+a.browser.version;f.flash.priority=0,f.html5.priority=l.html5.blacklist.some((function(t){return _.match(t)}))?-1:1,setTimeout((function(){n.info({flash:{available:f.flash.available,priority:f.flash.priority},html5:{available:f.html5.available,priority:f.html5.priority,audioContext:!!f.html5.audioContext}},"audioTypes")}),0);var b=function(t,e){this.name=d++,DEV&&n.debug(this,"constructor"),o.call(this),this.preferredType=t,this.overlay=e,this.state=b.STATE_INIT,this._played=0,this._lastSkip=0,this._playId=null,this._initInProgress=!0,this._whenReady=new s,this.whenReady=this._whenReady.promise().then(function(){this._initInProgress=!1,n.info(this,"implementation found",this.implementation.type),this.implementation.on("*",function(t,e,i){if(this._populateEvents(t,e,i),!e)switch(t){case b.EVENT_PLAY:this._setState(b.STATE_PLAYING);break;case b.EVENT_ENDED:case b.EVENT_SWAP:case b.EVENT_STOP:case b.EVENT_ERROR:n.info(this,"onEnded",t,i),this._setState(b.STATE_IDLE);break;case b.EVENT_PAUSE:this._setState(b.STATE_PAUSED);break;case b.EVENT_CRASHED:this._setState(b.STATE_CRASHED)}}.bind(this)),this._setState(b.STATE_IDLE)}.bind(this),function(t){throw this._initInProgress=!1,n.error(this,h.NO_IMPLEMENTATION,t),this._setState(b.STATE_CRASHED),t}.bind(this)),this._init(0)};o.mixin(b),u(b,p,!0),b.info={html5:f.html5.available,flash:f.flash.available},b.audioContext=f.html5.audioContext,b.prototype._setState=function(t){if(DEV&&n.debug(this,"_setState",t),t!==b.STATE_PAUSED||this.state===b.STATE_PLAYING){var e=this.state!==t;this.state=t,e&&(n.info(this,"newState",t),this.trigger(b.EVENT_STATE,t))}},b.prototype._init=function(t){if(t=t||0,n.info(this,"_init",t),this._initInProgress){t>l.audio.retry&&(n.error(this,h.NO_IMPLEMENTATION),this._whenReady.reject(new h(h.NO_IMPLEMENTATION)));var e=[f.html5,f.flash].sort(function(t,e){return t.available!==e.available?t.available?-1:1:t.AudioImplementation.type===this.preferredType?-1:e.AudioImplementation.type===this.preferredType?1:e.priority-t.priority}.bind(this)),i=this;!function n(){var o=e.shift();o?i._initType(o).then(i._whenReady.resolve,n):i._init(t+1)}()}},b.prototype._initType=function(t){n.info(this,"_initType",t);var e=new s;try{this.implementation=new t.AudioImplementation(this.overlay),this.implementation.whenReady?this.implementation.whenReady.then(e.resolve,e.reject):e.resolve()}catch(i){e.reject(i),n.warn(this,"_initTypeError",t,i)}return e.promise()},b.prototype._waitEvents=function(t,e,i){var n=new s,o=this;this[t]=n;var r=function(){e.forEach((function(t){o.off(t,n.resolve)})),i.forEach((function(t){o.off(t,n.reject)})),delete o[t]};return e.forEach((function(t){o.on(t,n.resolve)})),i.forEach((function(t){o.on(t,(function(e){var i=e instanceof Error?e:new h(e||t);n.reject(i)}))})),n.promise().then(r,r),n.promise()},b.prototype._populateEvents=function(t,e,i){t!==b.EVENT_PROGRESS&&DEV&&n.debug(this,"_populateEvents",t,e,i);var o=(e?b.PRELOADER_EVENT:"")+t;switch(t){case b.EVENT_CRASHED:case b.EVENT_SWAP:this.trigger(t,i);break;case b.EVENT_ERROR:n.error(this,"error",o,i),this.trigger(o,i);break;case b.EVENT_VOLUME:this.trigger(t,this.getVolume());break;case b.EVENT_PROGRESS:this.trigger(o,{duration:this.getDuration(e),loaded:this.getLoaded(e),position:e?0:this.getPosition(),played:e?0:this.getPlayed()});break;default:this.trigger(o)}},b.prototype.initPromise=function(){return this.whenReady},b.prototype.getState=function(){return this.state},b.prototype.getType=function(){return this.implementation&&this.implementation.type},b.prototype.getSrc=function(t){return this.implementation&&this.implementation.getSrc(t)},b.prototype.play=function(t,e){n.info(this,"play",n._showUrl(t),e),this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("play"),this._whenPause&&this._whenPause.reject("play"),this._whenStop&&this._whenStop.reject("play");var i=this._waitEvents("_whenPlay",[b.EVENT_PLAY],[b.EVENT_STOP,b.EVENT_ERROR,b.EVENT_CRASHED]);return i.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this._setState(b.STATE_PAUSED),this.implementation.play(t,e),i},b.prototype.restart=function(){return this.getDuration()?(this._generatePlayId(),this.setPosition(0),this._played=0,this._lastSkip=0,this.resume()):c(new h(h.BAD_STATE))},b.prototype.stop=function(t){return n.info(this,"stop",t),0!==t?this.implementation.stop(t):(this._played=0,this._lastSkip=0,this._whenPlay&&this._whenPlay.reject("stop"),this._whenPause&&this._whenPause.reject("stop"),e=this._whenStop?this._whenStop.promise():this._waitEvents("_whenStop",[b.EVENT_STOP],[b.EVENT_PLAY,b.EVENT_ERROR,b.EVENT_CRASHED]),this.implementation.stop(),e);var e},b.prototype.pause=function(){return n.info(this,"pause"),this.state!==b.STATE_PLAYING?c(new h(h.BAD_STATE)):(this._whenPlay&&this._whenPlay.reject("pause"),t=this._whenPause?this._whenPause.promise():this._waitEvents("_whenPause",[b.EVENT_PAUSE],[b.EVENT_STOP,b.EVENT_PLAY,b.EVENT_ERROR,b.EVENT_CRASHED]),this.implementation.pause(),t);var t},b.prototype.resume=function(){return n.info(this,"resume"),this.state!==b.STATE_PLAYING||this._whenPause?this.state!==b.STATE_IDLE&&this.state!==b.STATE_PAUSED&&this.state!==b.STATE_PLAYING?c(new h(h.BAD_STATE)):(this._whenPause&&this._whenPause.reject("resume"),this._whenPlay?t=this._whenPlay.promise():(t=this._waitEvents("_whenPlay",[b.EVENT_PLAY],[b.EVENT_STOP,b.EVENT_ERROR,b.EVENT_CRASHED])).abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this.implementation.resume(),t):r.resolve();var t},b.prototype.playPreloaded=function(t){if(n.info(this,"playPreloaded",n._showUrl(t)),t||(t=this.getSrc(1)),!this.isPreloaded(t))return n.warn(this,"playPreloadedBadTrack",h.NOT_PRELOADED),c(new h(h.NOT_PRELOADED));this._played=0,this._lastSkip=0,this._generatePlayId(),this._whenPlay&&this._whenPlay.reject("playPreloaded"),this._whenPause&&this._whenPause.reject("playPreloaded"),this._whenStop&&this._whenStop.reject("playPreloaded");var e=this._waitEvents("_whenPlay",[b.EVENT_PLAY],[b.EVENT_STOP,b.EVENT_ERROR,b.EVENT_CRASHED]);return e.abort=function(){this._whenPlay&&(this._whenPlay.reject.apply(this._whenPlay,arguments),this.stop())}.bind(this),this._setState(b.STATE_PAUSED),this.implementation.playPreloaded()||(n.warn(this,"playPreloadedError",h.NOT_PRELOADED),this._whenPlay.reject(new h(h.NOT_PRELOADED))),e},b.prototype.preload=function(t,e){if("msie"===a.browser.name&&"9"==a.browser.version[0])return c(new h(h.NOT_PRELOADED));n.info(this,"preload",n._showUrl(t),e),this._whenPreload&&this._whenPreload.reject("preload");var i=this._waitEvents("_whenPreload",[b.PRELOADER_EVENT+b.EVENT_LOADING,b.EVENT_SWAP],[b.PRELOADER_EVENT+b.EVENT_CRASHED,b.PRELOADER_EVENT+b.EVENT_ERROR,b.PRELOADER_EVENT+b.EVENT_STOP]);return i.abort=function(){this._whenPreload&&(this._whenPreload.reject.apply(this._whenPreload,arguments),this.stop(1))}.bind(this),this.implementation.preload(t,e),i},b.prototype.isPreloaded=function(t){return this.implementation.isPreloaded(t)},b.prototype.isPreloading=function(t){return this.implementation.isPreloading(t,1)},b.prototype.getPosition=function(){return this.implementation.getPosition()||0},b.prototype.setPosition=function(t){return n.info(this,"setPosition",t),t="flash"==this.implementation.type?Math.max(0,Math.min(this.getLoaded()-1,t)):Math.max(0,Math.min(this.getDuration()-1,t)),this._played+=this.getPosition()-this._lastSkip,this._lastSkip=t,this.implementation.setPosition(t),t},b.prototype.getDuration=function(t){return this.implementation.getDuration(t?1:0)||0},b.prototype.getLoaded=function(t){return this.implementation.getLoaded(t?1:0)||0},b.prototype.getPlayed=function(){var t=this.getPosition();return this._played+=t-this._lastSkip,this._lastSkip=t,this._played},b.prototype.getVolume=function(){return this.implementation?this.implementation.getVolume():0},b.prototype.setVolume=function(t){return DEV&&n.debug(this,"setVolume",t),this.implementation?this.implementation.setVolume(t):0},b.prototype.setPlaybackRate=function(t){return this.implementation.setPlaybackRate(t)},b.prototype.isDeviceVolume=function(){return!this.implementation||this.implementation.isDeviceVolume()},b.prototype.toggleCrossDomain=function(t){return"html5"!==this.implementation.type?(n.warn(this,"toggleCrossDomainFailed",this.implementation.type),!1):(this.implementation.toggleCrossDomain(t),!0)},b.prototype.toggleWebAudioAPI=function(t){return n.info(this,"toggleWebAudioAPI",t),"html5"!==this.implementation.type?(n.warn(this,"toggleWebAudioAPIFailed",this.implementation.type),!1):this.implementation.toggleWebAudioAPI(t)},b.prototype.setAudioPreprocessor=function(t){return n.info(this,"setAudioPreprocessor"),"html5"!==this.implementation.type?(n.warn(this,"setAudioPreprocessorFailed",this.implementation.type),!1):this.implementation.setAudioPreprocessor(t)},b.prototype._generatePlayId=function(){this._playId=Math.random().toString().slice(2)},b.prototype.getPlayId=function(){return this._playId},b.prototype._logger=function(){return{index:this.implementation&&this.implementation.name,src:this.implementation&&this.implementation._logger(),type:this.implementation&&this.implementation.type}},e.exports=b},{"./audio-static":4,"./config":5,"./error/audio-error":6,"./flash/audio-flash":10,"./html5/audio-html5":26,"./lib/async/deferred":28,"./lib/async/events":29,"./lib/async/promise":30,"./lib/async/reject":31,"./lib/browser/detect":32,"./lib/data/merge":37,"./logger/logger":43}],4:[function(t,e,i){var n={EVENT_PLAY:"play",EVENT_STOP:"stop",EVENT_PAUSE:"pause",EVENT_PROGRESS:"progress",EVENT_LOADING:"loading",EVENT_LOADED:"loaded",EVENT_VOLUME:"volumechange",EVENT_ENDED:"ended",EVENT_CRASHED:"crashed",EVENT_ERROR:"error",EVENT_STATE:"state",EVENT_SWAP:"swap",PRELOADER_EVENT:"preloader:",STATE_INIT:"init",STATE_CRASHED:"crashed",STATE_IDLE:"idle",STATE_PLAYING:"playing",STATE_PAUSED:"paused"};e.exports=n},{}],5:[function(t,e,i){e.exports={audio:{retry:3},flash:{path:"dist",name:"player-2_1.swf",version:"9.0.28",playerID:"YandexAudioFlashPlayer",callback:"ya.music.Audio._flashCallback",initTimeout:3e3,loadTimeout:5e3,clickTimeout:1e3,heartBeatInterval:1e3},html5:{blacklist:["linux:mozilla","unix:mozilla","macos:mozilla",":opera","@NT 5","@NT 4",":msie/9"]}}},{}],6:[function(t,e,i){var n=t("../lib/class/error-class"),o=function(t){n.call(this,t)};o.prototype=n.create("AudioError"),o.NO_IMPLEMENTATION="cannot find suitable implementation",o.NOT_PRELOADED="track is not preloaded",o.BAD_STATE="action is not permited from current state",o.FLASH_BLOCKER="flash is rejected by flash blocker plugin",o.FLASH_UNKNOWN_CRASH="flash is crashed without reason",o.FLASH_INIT_TIMEOUT="flash init timed out",o.FLASH_INTERNAL_ERROR="flash internal error",o.FLASH_EMMITER_NOT_FOUND="flash event emmiter not found",o.FLASH_NOT_RESPONDING="flash player doesn't response",e.exports=o},{"../lib/class/error-class":34}],7:[function(t,e,i){t("../export");var n=t("./audio-error"),o=t("./playback-error");ya.music.Audio.AudioError=n,ya.music.Audio.PlaybackError=o},{"../export":9,"./audio-error":6,"./playback-error":8}],8:[function(t,e,i){var n=t("../lib/class/error-class"),o=function(t,e){n.call(this,t),this.src=e};o.prototype=n.create("PlaybackError"),o.CONNECTION_ABORTED="Connection aborted",o.NETWORK_ERROR="Network error",o.DECODE_ERROR="Decode error",o.BAD_DATA="Bad data",o.DONT_START="Playback start error",o.html5={1:o.CONNECTION_ABORTED,2:o.NETWORK_ERROR,3:o.DECODE_ERROR,4:o.BAD_DATA},e.exports=o},{"../lib/class/error-class":34}],9:[function(t,e,i){"undefined"==typeof DEV&&(window.DEV=!0),void 0===window.ya&&(window.ya={});var n=window.ya;void 0===n.music&&(n.music={}),void 0===n.music.Audio&&(n.music.Audio={});var o=t("./config"),r=t("./audio-player"),s=t("./lib/class/proxy");n.music.Audio=s.createClass(r),n.music.Audio.config=o,t("./lib/export"),e.exports=n.music.Audio},{"./audio-player":3,"./config":5,"./lib/class/proxy":35,"./lib/export":38}],10:[function(t,e,i){var n,o=t("../config"),r=t("../lib/browser/swfobject"),s=t("../lib/browser/detect"),a=new(t("../logger/logger"))("AudioFlash"),l=t("./flash-manager"),u=t("./flash-interface"),c=t("../lib/async/events"),h=1,p=r.getFlashPlayerVersion();s.flashVersion=p.major+"."+p.minor+"."+p.release,i.available=r.hasFlashPlayerVersion(o.flash.version),a.info(this,"detection",i.available);var d=function(t,e){this.name=h++,DEV&&a.debug(this,"constructor"),n&&!e||(n=new l(t)),c.call(this),this.whenReady=n.createPlayer(this),this.whenReady.then(function(t){a.info(this,"ready",t)}.bind(this),function(t){a.error(this,"failed",t)}.bind(this))};c.mixin(d),i.type=d.type=d.prototype.type="flash",Object.keys(u.prototype).filter((function(t){return u.prototype.hasOwnProperty(t)&&"_"!==t[0]})).map((function(t){d.prototype[t]=function(){if(/^get/.test(t)||DEV&&a.debug(this,t),!this.hasOwnProperty("id"))return a.warn(this,"player is not ready"),null;var e=[].slice.call(arguments);return e.unshift(this.id),n.flash[t].apply(n.flash,e)}})),d.prototype.isDeviceVolume=function(){return!1},d.prototype._logger=function(){try{return this.hasOwnProperty("id")?{main:a._showUrl(this.getSrc(0)),preloader:a._showUrl(this.getSrc(1))}:{main:"not ready",preloader:"not ready"}}catch(t){return""}},i.AudioImplementation=d},{"../config":5,"../lib/async/events":29,"../lib/browser/detect":32,"../lib/browser/swfobject":33,"../logger/logger":43,"./flash-interface":11,"./flash-manager":12}],11:[function(t,e,i){var n=new(t("../logger/logger"))("FlashInterface"),o=function(t){this.flash=ya.music.Audio._flash=t};o.prototype._callFlash=function(t){try{return this.flash.call.apply(this.flash,arguments)}catch(t){return n.error(this,"_callFlashError",t,arguments[0],arguments[1],arguments[2]),null}},o.prototype._heartBeat=function(){this._callFlash("heartBeat",-1)},o.prototype._addPlayer=function(){return this._callFlash("addPlayer",-1)},o.prototype.setVolume=function(t,e){this._callFlash("setVolume",-1,e)},o.prototype.getVolume=function(){return this._callFlash("getVolume",-1)},o.prototype.play=function(t,e,i){this._callFlash("play",t,e,i&&1e3*i)},o.prototype.stop=function(t,e){this._callFlash("stop",t,e||0)},o.prototype.pause=function(t){this._callFlash("pause",t)},o.prototype.resume=function(t){this._callFlash("resume",t)},o.prototype.getPosition=function(t){return this._callFlash("getPosition",t)},o.prototype.setPosition=function(t,e){this._callFlash("setPosition",t,e)},o.prototype.getDuration=function(t,e){return this._callFlash("getDuration",t,e||0)},o.prototype.getLoaded=function(t,e){return this._callFlash("getLoaded",t,e||0)},o.prototype.preload=function(t,e,i,n){return this._callFlash("preload",t,e,i&&1e3*i,null==n?1:n)},o.prototype.isPreloaded=function(t,e,i){return this._callFlash("isPreloaded",t,e,null==i?1:i)},o.prototype.isPreloading=function(t,e,i){return this._callFlash("isPreloading",t,e,null==i?1:i)},o.prototype.playPreloaded=function(t,e){return this._callFlash("playPreloaded",t,null==e?1:e)},o.prototype.getSrc=function(t,e){return this._callFlash("getSrc",t,e||0)},e.exports=o},{"../logger/logger":43}],12:[function(t,e,i){var n=new(t("../logger/logger"))("FlashManager"),o=t("../config"),r=t("../audio-static"),s=t("./loader"),a=t("./flash-interface"),l=t("../lib/async/promise"),u=t("../lib/async/deferred"),c=t("../error/audio-error"),h=t("../lib/net/error/loader-error"),p=function(t){DEV&&n.debug(this,"constructor",t),this.state="init",this.overlay=t,this.emmiters=[];var e=this.deferred=new u;this.whenReady=this.deferred.promise();var i,r=o.flash.callback.split("."),a=r.pop(),l=window;(r.forEach((function(t){l[t]||(l[t]={}),l=l[t]})),l[a]=this._onEvent.bind(this),this.__loadTimeout=setTimeout(this._onLoadTimeout.bind(this),o.flash.loadTimeout),s(o.flash.path+"/"+o.flash.name,o.flash.version,o.flash.playerID,this._onLoad.bind(this),{},t),t)&&t.addEventListener("mousedown",(function(){i=i||setTimeout((function(){e.reject(new c(c.FLASH_NOT_RESPONDING))}),o.flash.clickTimeout)}),!0);this.whenReady.then(function(t){i=i&&clearTimeout(i),n.info(this,"ready",t)}.bind(this),function(t){n.error(this,"failed",t)}.bind(this))};p.EVENT_INIT="init",p.EVENT_FAIL="failed",p.EVENT_ERROR="error",p.EVENT_DEBUG="debug",p.prototype._onLoad=function(t){DEV&&n.debug(this,"_onLoad",t),clearTimeout(this.__loadTimeout),delete this.__loadTimeout,t.success?(this.flash=new a(t.ref),"ready"===this.state?this.deferred.resolve(t.ref):this.overlay||(this.__initTimeout=setTimeout(this._onInitTimeout.bind(this),o.flash.initTimeout))):(this.state="failed",this.deferred.reject(new c(t.__fbn?c.FLASH_BLOCKER:c.FLASH_UNKNOWN_CRASH)))},p.prototype._onLoadTimeout=function(){this.state="failed",this.deferred.reject(new h(h.TIMEOUT))},p.prototype._onInitTimeout=function(){this.state="failed",this.deferred.reject(new c(c.FLASH_INIT_TIMEOUT))},p.prototype._onInit=function(){DEV&&n.debug(this,"_onInit"),this.state="ready",this.__initTimeout&&(clearTimeout(this.__initTimeout),delete this.__initTimeout),this.flash&&(this.deferred.resolve(this.flash),this.__heartbeat=setInterval(this._onHeartBeat.bind(this),1e3))},p.prototype._onEvent=function(t,e,i,o){if("failed"!==this.state)return t===p.EVENT_DEBUG?n.info(this,"flashDEBUG",e,i,o):t===p.EVENT_ERROR?n.warn(this,"flashError",e,i,o):DEV&&n.debug(this,"onEvent",t,e,i),t===p.EVENT_INIT?this._onInit():t===p.EVENT_FAIL?(n.error(this,"failed",c.FLASH_INTERNAL_ERROR),void this.deferred.reject(new c(c.FLASH_INTERNAL_ERROR))):void(-1==e?l.resolve().then(function(){this.emmiters.forEach((function(e){e.trigger(t,i,o)}))}.bind(this)):this.emmiters[e]?l.resolve().then(function(){this.emmiters[e].trigger(t,i,o)}.bind(this)):n.error(this,c.FLASH_EMMITER_NOT_FOUND,e));n.warn(this,"onEventFailed",t,e,i,o)},p.prototype._onHeartBeat=function(){try{this.flash._heartBeat()}catch(t){n.error(this,"crashed",t),this._onEvent(r.EVENT_CRASHED,-1,t)}},p.prototype.createPlayer=function(t){DEV&&n.debug(this,"createPlayer");var e=this.whenReady.then(function(){return t.id=this.flash._addPlayer(),this.emmiters[t.id]=t,t.id}.bind(this));return e.then(function(t){DEV&&n.debug(this,"createPlayerSuccess",t)}.bind(this),function(t){n.error(this,"createPlayerError",t)}.bind(this)),e},e.exports=p},{"../audio-static":4,"../config":5,"../error/audio-error":6,"../lib/async/deferred":28,"../lib/async/promise":30,"../lib/net/error/loader-error":40,"../logger/logger":43,"./flash-interface":11,"./loader":15}],13:[function(t,e,i){var n=t("../lib/browser/swfobject");function o(t){t.parentNode.removeChild(t)}var r={__SWF_WRAPPER_CLASS:"fbn-swf-wrapper",__TIMEOUT:500,__TESTS:[function(t,e){return e.childNodes.length>1},function(t){return t.type&&"application/x-shockwave-flash"!=t.type},function(t){return!t.parentNode},function(t){return t.parentNode.className.indexOf("CTFnodisplay")>-1}],embedSWF:function(t,e,i,s,a,l,u,c,h,p,d){n&&n.addDomLoadEvent((function(){var f=document.getElementById(e);if(f){var _=document.createElement("div");_.className=r.__SWF_WRAPPER_CLASS,f.parentNode.replaceChild(_,f),_.appendChild(f),n.embedSWF(t,e,i,s,a,l,u,c,h,(function(t){if(t&&!1!==t.success){var i=t.ref,s=!1;try{s=i&&i.getSVGDocument&&i.getSVGDocument()}catch(t){}s?a(t):window.setTimeout((function(){for(var e=r.__TESTS,n=0,o=e.length;n<o;n++)if(e[n](i,_))return void a(t);p(t)}),r.__TIMEOUT)}else p(t);function a(t){if(!1!==d){n.removeSWF(e),o(_);var i=document.getElementById("CTFstack");i&&o(i);var r=document.body.lastChild;r&&"ujs_flashblock_placeholder"==r.className&&o(r)}t.success=!1,t.__fbn=!0,p(t)}}))}}))}};e.exports=r},{"../lib/browser/swfobject":33}],14:[function(t,e,i){var n=t("../lib/browser/swfobject"),o={__SWF_WRAPPER_CLASS:"femb-swf-wrapper",__TIMEOUT:500,embedSWF:function(t,e,i,r,s,a,l,u,c,h){n.addDomLoadEvent((function(){var p=document.getElementById(e);if(p){var d=document.createElement("div");d.className=o.__SWF_WRAPPER_CLASS,p.parentNode.replaceChild(d,p),d.appendChild(p),n.embedSWF(t,e,i,r,s,a,l,u,c,(function(t){if(t&&!1!==t.success){var e=t.ref,i=!1;try{i=e&&e.getSVGDocument&&e.getSVGDocument()}catch(t){}i?function(t){t.success=!1,h(t)}(t):window.setTimeout((function(){h(t)}),o.__TIMEOUT)}else h(t)}))}}))}};e.exports=o},{"../lib/browser/swfobject":33}],15:[function(t,e,i){var n=t("./flashblocknotifier"),o=t("./flashembedder"),r=t("../lib/browser/detect"),s="windows"===r.platform.os&&"safari"===r.browser.name;e.exports=function(t,e,i,r,a,l,u,c){var h,p,d,f,_=document.createElement("div");return _.id="wrapper_"+i,_.innerHTML='<div id="'+i+'"></div>',u=u||"1000",c=c||"1000",l&&!s?(h=o,p=u,d=c,f={allowscriptaccess:"always",wmode:"transparent"},_.className="ya-flash-player-wrapper",_.style.cssText="position: relative; width: 100%; height: 100%; overflow: hidden;",l.appendChild(_)):(h=n,p=d="1",f={allowscriptaccess:"always"},_.style.cssText="position: absolute; left: -1px; top: -1px; width: 0px; height: 0px; overflow: hidden;",document.body.appendChild(_)),h.embedSWF(t,i,p,d,e,"",a,f,{},r),_}},{"../lib/browser/detect":32,"./flashblocknotifier":13,"./flashembedder":14}],16:[function(t,e,i){e.exports=[60,170,310,600,1e3,3e3,6e3,12e3,14e3,16e3]},{}],17:[function(t,e,i){e.exports=[{id:"default",preamp:0,bands:[0,0,0,0,0,0,0,0,0,0]},{id:"Classical",preamp:-.5,bands:[-.5,-.5,-.5,-.5,-.5,-.5,-3.5,-3.5,-3.5,-4.5]},{id:"Club",preamp:-3.359999895095825,bands:[-.5,-.5,4,2.5,2.5,2.5,1.5,-.5,-.5,-.5]},{id:"Dance",preamp:-2.1599998474121094,bands:[4.5,3.5,1,-.5,-.5,-2.5,-3.5,-3.5,-.5,-.5]},{id:"Full Bass",preamp:-3.5999999046325684,bands:[4,4.5,4.5,2.5,.5,-2,-4,-5,-5.5,-5.5]},{id:"Full Bass & Treble",preamp:-5.039999961853027,bands:[3.5,2.5,-.5,-3.5,-2,.5,4,5.5,6,6]},{id:"Full Treble",preamp:-6,bands:[-4.5,-4.5,-4.5,-2,1,5.5,8,8,8,8]},{id:"Laptop Speakers / Headphone",preamp:-4.079999923706055,bands:[2,5.5,2.5,-1.5,-1,.5,2,4.5,6,7]},{id:"Large Hall",preamp:-3.5999999046325684,bands:[5,5,2.5,2.5,-.5,-2,-2,-2,-.5,-.5]},{id:"Live",preamp:-2.6399998664855957,bands:[-2,-.5,2,2.5,2.5,2.5,2,1,1,1]},{id:"Party",preamp:-2.6399998664855957,bands:[3.5,3.5,-.5,-.5,-.5,-.5,-.5,-.5,3.5,3.5]},{id:"Pop",preamp:-3.119999885559082,bands:[-.5,2,3.5,4,2.5,-.5,-1,-1,-.5,-.5]},{id:"Reggae",preamp:-4.079999923706055,bands:[-.5,-.5,-.5,-2.5,-.5,3,3,-.5,-.5,-.5]},{id:"Rock",preamp:-5.039999961853027,bands:[4,2,-2.5,-4,-1.5,2,4,5.5,5.5,5.5]},{id:"Ska",preamp:-5.519999980926514,bands:[-1,-2,-2,-.5,2,2.5,4,4.5,5.5,4.5]},{id:"Soft",preamp:-4.799999713897705,bands:[2,.5,-.5,-1,-.5,2,4,4.5,5.5,6]},{id:"Soft Rock",preamp:-2.6399998664855957,bands:[2,2,1,-.5,-2,-2.5,-1.5,-.5,1,4]},{id:"Techno",preamp:-3.8399999141693115,bands:[4,2.5,-.5,-2.5,-2,-.5,4,4.5,4.5,4]}]},{}],18:[function(t,e,i){var n=t("../../lib/async/events"),o=t("./equalizer-static"),r=function(t,e,i){n.call(this),this.type=e,this.filter=t.createBiquadFilter(),this.filter.type=e,this.filter.frequency.value=i,this.filter.Q.value=1,this.filter.gain.value=0};n.mixin(r),r.prototype.getFreq=function(){return this.filter.frequency.value},r.prototype.getValue=function(){return this.filter.gain.value},r.prototype.setValue=function(t){this.filter.gain.value=t,this.trigger(o.EVENT_CHANGE,t)},e.exports=r},{"../../lib/async/events":29,"./equalizer-static":19}],19:[function(t,e,i){var n={EVENT_CHANGE:"change"};e.exports=n},{}],20:[function(t,e,i){var n=t("../../lib/async/events"),o=t("../../lib/data/merge"),r=t("./equalizer-static"),s=t("./equalizer-band"),a=function(t,e){var i;n.call(this),this.preamp=new s(t,"highshelf",0),this.preamp.on("*",this._onBandEvent.bind(this,this.preamp)),e=e||a.DEFAULT_BANDS,this.bands=e.map(function(n,o){var r=new s(t,0==o?"lowshelf":o+1<e.length?"peaking":"highshelf",n);return r.on("*",this._onBandEvent.bind(this,r)),i?i.filter.connect(r.filter):this.preamp.filter.connect(r.filter),i=r,r}.bind(this)),this.input=this.preamp.filter,this.output=this.bands[this.bands.length-1].filter};n.mixin(a),o(a,r,!0),a.DEFAULT_BANDS=t("./default.bands.js"),a.DEFAULT_PRESETS=t("./default.presets.js"),a.prototype._onBandEvent=function(t,e,i){this.trigger(e,t.getFreq(),i)},a.prototype.loadPreset=function(t){t.bands.forEach(function(t,e){this.bands[e].setValue(t)}.bind(this)),this.preamp.setValue(t.preamp)},a.prototype.savePreset=function(){return{preamp:this.preamp.getValue(),bands:this.bands.map((function(t){return t.getValue()}))}},a.prototype.guessPreamp=function(){for(var t=0,e=0,i=this.bands.length;e<i;e++)t+=this.bands[e].getValue();return-t/2},e.exports=a},{"../../lib/async/events":29,"../../lib/data/merge":37,"./default.bands.js":16,"./default.presets.js":17,"./equalizer-band":18,"./equalizer-static":19}],21:[function(t,e,i){t("../export"),ya.music.Audio.fx.Equalizer=t("./equalizer")},{"../export":22,"./equalizer":20}],22:[function(t,e,i){t("../export"),ya.music.Audio.fx={}},{"../export":9}],23:[function(t,e,i){t("../export"),ya.music.Audio.fx.volumeLib=t("./volume-lib")},{"../export":22,"./volume-lib":24}],24:[function(t,e,i){var n={EPSILON:.01};n._DBFS_COEF=20/Math.log(10),n.toExponent=function(t){var e=Math.pow(n.EPSILON,1-t);return e>n.EPSILON?e:0},n.fromExponent=function(t){return 1-Math.log(Math.max(t,n.EPSILON))/Math.log(n.EPSILON)},n.toDBFS=function(t){return Math.log(t)*n._DBFS_COEF},n.fromDBFS=function(t){return Math.exp(t/n._DBFS_COEF)},e.exports=n},{}],25:[function(t,e,i){var n=new(t("../logger/logger"))("AudioHTML5Loader"),o=t("../lib/async/events"),r=t("../lib/async/deferred"),s=t("../audio-static"),a=t("../error/playback-error"),l=t("../lib/noop"),u=1,c=function(){this.name=u++,DEV&&n.debug(this,"constructor"),o.call(this),this.on("*",function(t){t!==s.EVENT_PROGRESS&&DEV&&n.debug(this,"onEvent",t)}.bind(this)),this.promises={},this.src="",this.position=0,this.lastUpdate=0,this.notLoading=!0,this.output=null,this.__startPlay=this._startPlay.bind(this),this.__restart=this._restart.bind(this),this.__startupAudio=this._startupAudio.bind(this),this.__updateProgress=this._updateProgress.bind(this),this.__onNativeLoading=this._onNativeLoading.bind(this),this.__onNativeEnded=this._onNativeEnded.bind(this),this.__onNativeError=this._onNativeError.bind(this),this.__onNativePause=this._onNativePause.bind(this),this.__onNativePlay=this.trigger.bind(this,s.EVENT_PLAY),this._initAudio()};o.mixin(c),c._catchPromise=function(t){t&&t.catch&&t.catch((function(){}))},c._updateInterval=30,c.EVENT_NATIVE_PLAY="play",c.EVENT_NATIVE_PAUSE="pause",c.EVENT_NATIVE_TIMEUPDATE="timeupdate",c.EVENT_NATIVE_ENDED="ended",c.EVENT_NATIVE_DURATION="durationchange",c.EVENT_NATIVE_LOADING="progress",c.EVENT_NATIVE_META="loadedmetadata",c.EVENT_NATIVE_CANPLAY="canplay",c.EVENT_NATIVE_ERROR="error",(c._defaultInitListener=function(){}).step="user",c.prototype._updateProgress=function(){var t=+new Date;t-this.lastUpdate<c._updateInterval||(this.lastUpdate=t,this.trigger(s.EVENT_PROGRESS))},c.prototype._onNativeLoading=function(){if(this._updateProgress(),this.audio.buffered.length){var t=this.audio.buffered.end(0)-this.audio.buffered.start(0);this.notLoading&&t&&(this.notLoading=!1,this.trigger(s.EVENT_LOADING)),t>=this.audio.duration-.1&&this.trigger(s.EVENT_LOADED)}},c.prototype._onNativeEnded=function(){this.trigger(s.EVENT_PROGRESS),this.trigger(s.EVENT_ENDED),this.ended=!0,this.playing=!1,c._catchPromise(this.audio.pause())},c.prototype._onNativeError=function(t){if(this.src){if(2==this.audio.error.code)return n.warn(this,"Network error. Restarting...",n._showUrl(this.src)),this.position=this.audio.currentTime,void this._restart();var e=new a(this.audio.error?a.html5[this.audio.error.code]:t instanceof Error?t.message:t,this.src);this.playing=!1,this.trigger(s.EVENT_ERROR,e)}},c.prototype._onNativePause=function(){this.ended||this.trigger(s.EVENT_PAUSE)},c.prototype._initUserEvents=function(){document.body.addEventListener("mousedown",this.__startupAudio,!0),document.body.addEventListener("keydown",this.__startupAudio,!0),document.body.addEventListener("touchstart",this.__startupAudio,!0)},c.prototype._deinitUserEvents=function(){document.body.removeEventListener("mousedown",this.__startupAudio,!0),document.body.removeEventListener("keydown",this.__startupAudio,!0),document.body.removeEventListener("touchstart",this.__startupAudio,!0)},c.prototype._initNativeEvents=function(){this.audio.addEventListener(c.EVENT_NATIVE_PAUSE,this.__onNativePause),this.audio.addEventListener(c.EVENT_NATIVE_PLAY,this.__onNativePlay),this.audio.addEventListener(c.EVENT_NATIVE_ENDED,this.__onNativeEnded),this.audio.addEventListener(c.EVENT_NATIVE_TIMEUPDATE,this.__updateProgress),this.audio.addEventListener(c.EVENT_NATIVE_DURATION,this.__updateProgress),this.audio.addEventListener(c.EVENT_NATIVE_LOADING,this.__onNativeLoading),this.audio.addEventListener(c.EVENT_NATIVE_ERROR,this.__onNativeError)},c.prototype._deinitNativeEvents=function(){this.audio.removeEventListener(c.EVENT_NATIVE_PAUSE,this.__onNativePause),this.audio.removeEventListener(c.EVENT_NATIVE_PLAY,this.__onNativePlay),this.audio.removeEventListener(c.EVENT_NATIVE_ENDED,this.__onNativeEnded),this.audio.removeEventListener(c.EVENT_NATIVE_TIMEUPDATE,this.__updateProgress),this.audio.removeEventListener(c.EVENT_NATIVE_DURATION,this.__updateProgress),this.audio.removeEventListener(c.EVENT_NATIVE_LOADING,this.__onNativeLoading),this.audio.removeEventListener(c.EVENT_NATIVE_ERROR,this.__onNativeError)},c.prototype._initAudio=function(){DEV&&n.debug(this,"_initAudio"),this.muteEvents(),this.audio=document.createElement("audio"),this.audio.loop=!1,this.audio.preload=this.audio.autobuffer="auto",this.audio.autoplay=!1,this.audio.src="",this._initUserEvents(),this.__initListener=c._defaultInitListener,this._initNativeEvents()},c.prototype._deinitAudio=function(){DEV&&n.debug(this,"_deinitAudio"),this.muteEvents(),this._deinitUserEvents(),this._deinitNativeEvents(),this.audio=null},c.prototype._startupAudio=function(){DEV&&n.debug(this,"_startupAudio"),this._deinitUserEvents(),this.__initListener=function(t){this.__initListener&&(this.audio.removeEventListener(c.EVENT_NATIVE_PLAY,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_CANPLAY,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_META,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_ERROR,this.__initListener),this.__initListener=function(){this.__initListener&&(this.audio.removeEventListener(c.EVENT_NATIVE_PAUSE,this.__initListener),delete this.__initListener,this.unmuteEvents(),n.info(this,"_startupAudio:ready"))}.bind(this),this.__initListener.step="pause",this.audio.addEventListener(c.EVENT_NATIVE_PAUSE,this.__initListener),c._catchPromise(this.audio.pause()),DEV&&n.debug(this,"_startupAudio:play",t.type))}.bind(this),this.__initListener.step="play",this.audio.addEventListener(c.EVENT_NATIVE_PLAY,this.__initListener),this.audio.addEventListener(c.EVENT_NATIVE_CANPLAY,this.__initListener),this.audio.addEventListener(c.EVENT_NATIVE_META,this.__initListener),this.audio.addEventListener(c.EVENT_NATIVE_ERROR,this.__initListener),c._catchPromise(this.audio.load()),c._catchPromise(this.audio.play())},c.prototype._breakStartup=function(t){this._deinitUserEvents(),this.unmuteEvents(),this.__initListener&&(this.audio.removeEventListener(c.EVENT_NATIVE_PLAY,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_CANPLAY,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_META,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_ERROR,this.__initListener),this.audio.removeEventListener(c.EVENT_NATIVE_PAUSE,this.__initListener),n.warn(this,"_startupAudio:interrupted",this.__initListener.step,t),delete this.__initListener)},c.prototype._waitFor=function(t,e,i){if(!this.promises[t]){var n=new r;if(this.promises[t]=n,e.call(this))n.resolve();else{for(var o=function(){e.call(this)&&n.resolve()}.bind(this),s=function(){for(var t=0,e=i.length;t<e;t++)this.audio.removeEventListener(i[t],o)}.bind(this),a=0,l=i.length;a<l;a++)this.audio.addEventListener(i[a],o);n.promise().then(s,s)}}return this.promises[t].promise()},c.prototype._cancelWait=function(t,e){var i;(i=this.promises[t])&&(delete this.promises[t],i.reject(e))},c.prototype._abortPromises=function(t){for(var e in this.promises)this.promises.hasOwnProperty(e)&&this._cancelWait(e,t)},c._promiseMetadataEvents=[c.EVENT_NATIVE_META,c.EVENT_NATIVE_CANPLAY],c.prototype._promiseMetadataCheck=function(){return this.audio.readyState>this.audio.HAVE_METADATA},c.prototype._promiseMetadata=function(){return this._waitFor("metadata",this._promiseMetadataCheck,c._promiseMetadataEvents)},c._promiseLoadedEvents=[c.EVENT_NATIVE_LOADING],c.prototype._promiseLoadedCheck=function(){this.__loaderTimer=this.__loaderTimer&&clearTimeout(this.__loaderTimer)||setTimeout(function(){this._cancelWait("loaded","timeout")}.bind(this),5e3);var t=Math.min(this.position+45,this.audio.duration);return this.audio.buffered.length&&this.audio.buffered.end(0)-this.audio.buffered.start(0)>=t},c.prototype._promiseLoaded=function(){var t=this._waitFor("loaded",this._promiseLoadedCheck,c._promiseLoadedEvents);return t.cleanTimer||(t.cleanTimer=function(){this.__loaderTimer=clearTimeout(this.__loaderTimer)}.bind(this),t.then(t.cleanTimer,t.cleanTimer)),t},c._promisePlayingEvents=[c.EVENT_NATIVE_TIMEUPDATE],c.prototype._promisePlayingCheck=function(){var t=Math.min(this.position+.2,this.audio.duration);return this.audio.currentTime>=t},c.prototype._promisePlaying=function(){return this._waitFor("playing",this._promisePlayingCheck,c._promisePlayingEvents)},c.prototype._promiseStartPlaying=function(){if(!this.promises.startPlaying){var t=new r;this.promises.startPlaying=t;var e,i=function(t){o=!0,this._cancelWait("startPlaying",t)}.bind(this),o=!1,s=function(){clearTimeout(e)};this._promisePlaying().then(function(){o=!0,t.resolve(),n.info(this,"startPlaying:success")}.bind(this),i),this._promiseLoaded().then(function(){o||(e=setTimeout(function(){t.reject("timeout"),this._cancelWait("playing","timeout"),n.warn(this,"startPlaying:failed")}.bind(this),5e3))}.bind(this),i),this._promisePlaying().then(s,s),t.promise().then(s,s)}return this.promises.startPlaying.promise()},c.prototype.load=function(t){DEV&&n.debug(this,"load",t),this._abortPromises("load"),this._breakStartup("load"),this.ended=!1,this.playing=!1,this.notLoading=!0,this.position=0,this.src=t,this.audio.src=t,c._catchPromise(this.audio.load())},c.prototype.stop=function(){DEV&&n.debug(this,"stop"),this._abortPromises("stop"),this._breakStartup("stop"),this.load("")},c.prototype._startPlay=function(){DEV&&n.debug(this,"_startPlay"),this.audio.currentTime=this.position,this.playing&&(this._breakStartup("startPlay"),c._catchPromise(this.audio.play()),this._promiseStartPlaying().then(function(){this.retry=0}.bind(this),this.__restart))},c.prototype._restart=function(t){if(n.info(this,"_restart",t,this.position,this.playing),this.src&&(!t||"timeout"===t)){if(this.retry++,this.retry>5)return this.playing=!1,void this.trigger(s.EVENT_ERROR,new a(a.DONT_START,this.src));var e=this.position,i=this.playing;this.load(this.src),i?this._play(e):this.setPosition(e)}},c.prototype.play=function(t){return DEV&&n.debug(this,"play",t),this.retry=0,this._play(t)},c.prototype._play=function(t){DEV&&n.debug(this,"_play",t),this.playing||(this._breakStartup("play"),this.ended=!1,this.playing=!0,this.position=null==t?this.position||0:t,this._promiseMetadata().then(this.__startPlay,l))},c.prototype.pause=function(){DEV&&n.debug(this,"pause"),this.playing=!1,this._cancelWait("startPlaying","pause"),this._breakStartup("pause"),c._catchPromise(this.audio.pause()),this.position=this.audio.currentTime},c.prototype.setPosition=function(t){DEV&&n.debug(this,"setPosition",t),isFinite(t)?(this.position=t,this._promiseMetadata().then(function(){this.audio.currentTime=this.position}.bind(this),l)):n.warn(this,"setPositionFailed",t)},c.prototype.toggleCrossDomain=function(t){t?this.audio.crossOrigin="anonymous":this.audio.removeAttribute("crossOrigin"),this._restart()},c.prototype.createSource=function(t){if(!this.output){DEV&&n.debug(this,"createSource");var e=!this.audio.crossOrigin;this.audio.crossOrigin="anonymous",this.output=t.createMediaElementSource(this.audio),this.output.connect(t.destination),e&&this._restart()}},c.prototype.destroySource=function(){this.output&&(n.warn(this,"destroySource"),this.output.disconnect(),this.output=null,this._abortPromises("destroy"),this._deinitAudio(),this._initAudio(),this._startupAudio(),this._restart())},c.prototype.destroy=function(){DEV&&n.debug(this,"destroy"),this.output&&(this.output.disconnect(),this.output=null),this._abortPromises(),this._deinitAudio(),this.__restart=null,this.__startPlay=null,this.promises=null},c.prototype._logger=function(){return{init:!!this.__initListener&&this.__initListener.step,src:n._showUrl(this.src),playing:this.playing,ended:this.ended,notLoading:this.notLoading,position:this.position}},e.exports=c},{"../audio-static":4,"../error/playback-error":8,"../lib/async/deferred":28,"../lib/async/events":29,"../lib/noop":41,"../logger/logger":43}],26:[function(t,e,i){var n=new(t("../logger/logger"))("AudioHTML5"),o=t("../lib/browser/detect"),r=t("../lib/async/events"),s=t("../audio-static"),a=t("./audio-html5-loader"),l=1;if(i.available=function(){var t=!0;try{var e=document.createElement("audio").canPlayType("audio/mpeg");e&&"no"!==e||(n.warn(this,"HTML5 detection failed with reason",e),t=!1)}catch(e){n.warn(this,"HTML5 detection failed with error",e),t=!1}return n.info(this,"detection",t),t}(),o.platform.mobile||o.platform.tablet)u=null,n.info(this,"WebAudioAPI not allowed for mobile");else try{var u=new AudioContext;n.info(this,"WebAudioAPI context created")}catch(t){u=null,n.info(this,"WebAudioAPI not detected")}var c=function(){this.name=l++,DEV&&n.debug(this,"constructor"),r.call(this),this.on("*",function(t){t!==s.EVENT_PROGRESS&&DEV&&n.debug(this,"onEvent",t)}.bind(this)),this.webAudioApi=!1,this.activeLoader=0,this.volume=1,this.loaders=[],this._addLoader(),this._addLoader(),this._setActive(0)};r.mixin(c),i.type=c.type=c.prototype.type="html5",c.prototype._addLoader=function(){DEV&&n.debug(this,"_addLoader");var t=this,e=new a;e.index=this.loaders.push(e)-1,e.on("*",(function(i,n){var o=(t.loaders.length+e.index-t.activeLoader)%t.loaders.length;t.trigger(i,o,n)})),this.webAudioApi&&e.createSource(u)},c.prototype._setActive=function(t){DEV&&n.debug(this,"_setActive",t),this.activeLoader=(this.activeLoader+t)%this.loaders.length,this.trigger(s.EVENT_SWAP,t),0!==t&&this.stop(t)},c.prototype._getLoader=function(t){return t=t||0,this.loaders[(this.activeLoader+t)%this.loaders.length]},c.prototype.toggleCrossDomain=function(t){this.loaders.forEach((function(e){e.toggleCrossDomain(t)}))},c.prototype.toggleWebAudioAPI=function(t){return u?(n.info(this,"toggleWebAudioAPI",t),this.webAudioApi==t||(t?(this.audioOutput=u.createGain(),this.audioOutput.gain.value=this.volume,this.audioOutput.connect(u.destination),this.preprocessor&&this.preprocessor.output.connect(this.audioOutput),this.loaders.forEach(function(t){t.audio.volume=1,t.createSource(u),t.output.disconnect(),t.output.connect(this.preprocessor?this.preprocessor.input:this.audioOutput)}.bind(this))):this.audioOutput&&(this.preprocessor&&this.preprocessor.output.disconnect(),this.audioOutput.disconnect(),delete this.audioOutput,this.loaders.forEach(function(t){t.audio.volume=this.volume,t.output.disconnect(),t.output.connect(u.destination)}.bind(this))),this.webAudioApi=t),t):(n.warn(this,"toggleWebAudioAPIError",t),!1)},c.prototype.setAudioPreprocessor=function(t){return this.webAudioApi?(n.info(this,"setAudioPreprocessor"),this.preprocessor===t||(this.preprocessor&&this.preprocessor.output.disconnect(),this.preprocessor=t,t?(this.loaders.forEach((function(e){e.output.disconnect(),e.output.connect(t.input)})),t.output.connect(this.audioOutput),!0):(this.loaders.forEach(function(t){t.output.disconnect(),t.output.connect(this.audioOutput)}.bind(this)),!0))):(n.warn(this,"setAudioPreprocessorError",t),!1)},c.prototype.play=function(t,e){DEV&&n.debug(this,"play",t);var i=this._getLoader();i.load(t),i.play(0)},c.prototype.pause=function(){DEV&&n.debug(this,"pause"),this._getLoader().pause()},c.prototype.resume=function(){DEV&&n.debug(this,"resume"),this._getLoader().play()},c.prototype.stop=function(t){DEV&&n.debug(this,"stop",t),this._getLoader(t||0).stop(),this.trigger(s.EVENT_STOP,t)},c.prototype.getPosition=function(){return this._getLoader().audio.currentTime},c.prototype.setPosition=function(t){DEV&&n.debug(this,"setPosition",t),this._getLoader().setPosition(t-.001)},c.prototype.getDuration=function(t){return this._getLoader(t).audio.duration},c.prototype.getLoaded=function(t){var e=this._getLoader(t);return e.audio.buffered.length?e.audio.buffered.end(0)-e.audio.buffered.start(0):0},c.prototype.getVolume=function(){return this.volume},c.prototype.setVolume=function(t){DEV&&n.debug(this,"setVolume",t),this.volume=t,this.webAudioApi?this.audioOutput.gain.value=t:this.loaders.forEach((function(e){e.audio.volume=t})),this.trigger(s.EVENT_VOLUME)},c.prototype.setPlaybackRate=function(t){this.webAudioApi||this.loaders.forEach((function(e){e.audio.playbackRate=t}))},c.prototype.preload=function(t,e,i){DEV&&n.debug(this,"preload",t,i),i=null==i?1:i,this._getLoader(i).load(t)},c.prototype.isPreloaded=function(t,e){e=null==e?1:e;var i=this._getLoader(e);return i.src===t&&!i.notLoading},c.prototype.isPreloading=function(t,e){return e=null==e?1:e,this._getLoader(e).src===t},c.prototype.playPreloaded=function(t){DEV&&n.debug(this,"playPreloaded",t),t=null==t?1:t;var e=this._getLoader(t);return!!e.src&&(this._setActive(t),e.play(),!0)},c.prototype.getSrc=function(t){return this._getLoader(t).src},c.prototype.isDeviceVolume=function(){return o.onlyDeviceVolume},c.prototype._logger=function(){try{return{main:n._showUrl(this.getSrc(0)),preloader:n._showUrl(this.getSrc(1))}}catch(t){return""}},i.audioContext=u,i.AudioImplementation=c},{"../audio-static":4,"../lib/async/events":29,"../lib/browser/detect":32,"../logger/logger":43,"./audio-html5-loader":25}],27:[function(t,e,i){var n=t("./export");t("./error/export"),t("./lib/net/error/export"),t("./logger/export"),t("./fx/equalizer/export"),t("./fx/volume/export"),e.exports=n},{"./error/export":7,"./export":9,"./fx/equalizer/export":21,"./fx/volume/export":23,"./lib/net/error/export":39,"./logger/export":42}],28:[function(t,e,i){var n=t("./promise"),o=t("../noop");e.exports=function(){var t=this,e=new n((function(e,i){t.resolve=e,t.reject=i}));e.catch(o),this.promise=function(){return e}}},{"../noop":41,"./promise":30}],29:[function(t,e,i){var n=t("../data/merge"),o=function(){this._listeners={},this._muted=!1};o.mixin=function(t){return n(t.prototype,o.prototype,!0),t},o.eventize=function(t){return n(t,o.prototype,!0),o.call(t),t},o.prototype.on=function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this},o.prototype.off=function(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;for(var i=this._listeners[t],n=0,o=i.length;n<o;n++)if(i[n]===e||i[n].callback===e){i.splice(n,1),i.length||delete this._listeners[t];break}return this},o.prototype.once=function(t,e){var i=this,n=function(){i.off(t,n),e.apply(this,arguments)};return n.callback=e,i.on(t,n),this},o.prototype.clearListeners=function(){for(var t in this._listeners)this._listeners.hasOwnProperty(t)&&delete this._listeners[t];return this},o.prototype.trigger=function(t,e){if(this._muted)return this;if(e=[].slice.call(arguments,1),"*"!==t&&o.prototype.trigger.apply(this,["*",t].concat(e)),!this._listeners[t])return this;for(var i=[].concat(this._listeners[t]),n=0,r=i.length;n<r;n++)i[n].apply(null,e);return this},o.prototype.pipeEvents=function(t){return this.on("*",o.prototype.trigger.bind(t)),this},o.prototype.muteEvents=function(){return this._muted=!0,this},o.prototype.unmuteEvents=function(){return delete this._muted,this},e.exports=o},{"../data/merge":37}],30:[function(t,e,i){var n,o=t("vow"),r=t("../browser/detect"),s=t("../data/merge");"function"!=typeof window.Promise||"msie"===r.browser.name||"edge"===r.browser.name?(s(n=function(t){var e;try{e=new o.Promise(t)}catch(t){e=o.reject(t)}return e},o.Promise,!0),n.prototype=o.Promise.prototype):n=window.Promise,e.exports=n},{"../browser/detect":32,"../data/merge":37,vow:2}],31:[function(t,e,i){var n=t("../noop"),o=t("./promise");e.exports=function(t){var e=o.reject(t);return e.catch(n),e}},{"../noop":41,"./promise":30}],32:[function(t,e,i){var n=navigator.userAgent.toLowerCase(),o=/(ucbrowser)\/([\w.]+)/.exec(n)||/^((?!chrome).)*version\/([\d\w\.]+).*(safari)/.exec(n)||/(yabrowser)[ \/]([\w.]+)/.exec(n)||/(edge)\/([\w.]+)/.exec(n)||/(iemobile)\/([\d\.]+)/.exec(n)||/(opr|opera)(?:.*version)?[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(n)||[],r={name:o[1]||"",version:o[2]||"0"};"safari"===o[3]&&(r.name=o[3]),"msie"===r.name&&(document.documentMode?r.documentMode=document.documentMode:(r.documentMode=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(r.documentMode=7))),"opr"===r.name&&(r.name="opera"),"mozilla"===r.name&&"11"===r.version.split(".")[0]&&(r.name="msie");a=/(windows phone|ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(n)||[];var s=/(ipad|playbook)/.exec(n)||!/(mobile)/.exec(n)&&/(android)/.exec(n)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));var a={type:a[1]||"",tablet:!!s[1],mobile:a[1]&&!s[1]||!1};a.type||(a.type="pc"),a.os=a.type,"ipad"===a.type||"iphone"===a.type||"ipod"===a.type?a.os="ios":"android"===a.type?a.os="android":"windows phone"===a.type||-1!==navigator.appVersion.indexOf("Win")?(a.os="windows",a.version=navigator.userAgent.match(/win[^ ]* ([^;]*)/i),a.version=a.version&&a.version[1]):-1!==navigator.appVersion.indexOf("Mac")?a.os="macos":-1!==navigator.appVersion.indexOf("X11")?a.os="unix":-1!==navigator.appVersion.indexOf("Linux")&&(a.os="linux");var l=!0;try{var u=document.createElement("audio");u.volume=.63,l=Math.abs(u.volume-.63)>.01}catch(t){l=!0}var c={browser:r,platform:a,onlyDeviceVolume:l};e.exports=c},{}],33:[function(t,e,i){
/**
 * @license SWFObject v2.2 <http://code.google.com/p/swfobject/>
 * is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 * @private
*/
var n=function(){var t,e,i,o,r,s,a="undefined",l="object",u="application/x-shockwave-flash",c=window,h=document,p=navigator,d=!1,f=[function(){d?function(){var t=h.getElementsByTagName("body")[0],e=C(l);e.setAttribute("type",u);var i=t.appendChild(e);if(i){var n=0;!function(){if(typeof i.GetVariable!=a){var o=i.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),g.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,A()}()}else A()}():A()}],_=[],b=[],m=[],y=!1,E=!1,v=!0,g=function(){var t=typeof h.getElementById!=a&&typeof h.getElementsByTagName!=a&&typeof h.createElement!=a,e=p.userAgent.toLowerCase(),i=p.platform.toLowerCase(),n=/win/.test(i||e),o=/mac/.test(i||e),r=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s=!1,f=[0,0,0],_=null;if(typeof p.plugins!=a&&typeof p.plugins["Shockwave Flash"]==l)!(_=p.plugins["Shockwave Flash"].description)||typeof p.mimeTypes!=a&&p.mimeTypes[u]&&!p.mimeTypes[u].enabledPlugin||(d=!0,s=!1,_=_.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(_.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(_.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(_)?parseInt(_.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof c.ActiveXObject!=a)try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(_=b.GetVariable("$version"))&&(s=!0,_=_.split(" ")[1].split(","),f=[parseInt(_[0],10),parseInt(_[1],10),parseInt(_[2],10)])}catch(t){}return{w3:t,pv:f,wk:r,ie:s,win:n,mac:o}}();function T(){if(!y){try{var t=h.getElementsByTagName("body")[0].appendChild(C("span"));t.parentNode.removeChild(t)}catch(t){return}y=!0;for(var e=f.length,i=0;i<e;i++)f[i]()}}function w(t){y?t():f[f.length]=t}function k(t){if(typeof c.addEventListener!=a)c.addEventListener("load",t,!1);else if(typeof h.addEventListener!=a)h.addEventListener("load",t,!1);else if(typeof c.attachEvent!=a)!function(t,e,i){t.attachEvent(e,i),m[m.length]=[t,e,i]}(c,"onload",t);else if("function"==typeof c.onload){var e=c.onload;c.onload=function(){e(),t()}}else c.onload=t}function A(){var t=_.length;if(t>0)for(var e=0;e<t;e++){var i=_[e].id,n=_[e].callbackFn,o={success:!1,id:i};if(g.pv[0]>0){var r=D(i);if(r)if(!j(_[e].swfVersion)||g.wk&&g.wk<312)if(_[e].expressInstall&&P()){var s={};s.data=_[e].expressInstall,s.width=r.getAttribute("width")||"0",s.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(s.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(s.align=r.getAttribute("align"));for(var l={},u=r.getElementsByTagName("param"),c=u.length,h=0;h<c;h++)"movie"!=u[h].getAttribute("name").toLowerCase()&&(l[u[h].getAttribute("name")]=u[h].getAttribute("value"));x(s,l,i,n)}else V(r),n&&n(o);else F(i,!0),n&&(o.success=!0,o.ref=N(i),n(o))}else if(F(i,!0),n){var p=N(i);p&&typeof p.SetVariable!=a&&(o.success=!0,o.ref=p),n(o)}}}function N(t){var e=null,i=D(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=a)e=i;else{var n=i.getElementsByTagName(l)[0];n&&(e=n)}return e}function P(){return!E&&j("6.0.65")&&(g.win||g.mac)&&!(g.wk&&g.wk<312)}function x(n,r,s,l){E=!0,i=l||null,o={success:!1,id:s};var u=D(s);if(u){"OBJECT"==u.nodeName?(t=S(u),e=null):(t=u,e=s),n.id="SWFObjectExprInst",(typeof n.width==a||!/%$/.test(n.width)&&parseInt(n.width,10)<310)&&(n.width="310"),(typeof n.height==a||!/%$/.test(n.height)&&parseInt(n.height,10)<137)&&(n.height="137"),h.title=h.title.slice(0,47)+" - Flash Player Installation";var p=g.ie&&g.win?"ActiveX":"PlugIn",d="MMredirectURL="+c.location.toString().replace(/&/g,"%26")+"&MMplayerType="+p+"&MMdoctitle="+h.title;if(typeof r.flashvars!=a?r.flashvars+="&"+d:r.flashvars=d,g.ie&&g.win&&4!=u.readyState){var f=C("div");s+="SWFObjectNew",f.setAttribute("id",s),u.parentNode.insertBefore(f,u),u.style.display="none",function(){4==u.readyState?u.parentNode.removeChild(u):setTimeout(arguments.callee,10)}()}L(n,r,s)}}function V(t){if(g.ie&&g.win&&4!=t.readyState){var e=C("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(S(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(S(t),t)}function S(t){var e=C("div");if(g.win&&g.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(l)[0];if(i){var n=i.childNodes;if(n)for(var o=n.length,r=0;r<o;r++)1==n[r].nodeType&&"PARAM"==n[r].nodeName||8==n[r].nodeType||e.appendChild(n[r].cloneNode(!0))}}return e}function L(t,e,i){var n,o=D(i);if(g.wk&&g.wk<312)return n;if(o)if(typeof t.id==a&&(t.id=i),g.ie&&g.win){var r="";for(var s in t)t[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?e.movie=t[s]:"styleclass"==s.toLowerCase()?r+=' class="'+t[s]+'"':"classid"!=s.toLowerCase()&&(r+=" "+s+'="'+t[s]+'"'));var c="";for(var h in e)e[h]!=Object.prototype[h]&&(c+='<param name="'+h+'" value="'+e[h]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+c+"</object>",b[b.length]=t.id,n=D(t.id)}else{var p=C(l);for(var d in p.setAttribute("type",u),t)t[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?p.setAttribute("class",t[d]):"classid"!=d.toLowerCase()&&p.setAttribute(d,t[d]));for(var f in e)e[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&R(p,f,e[f]);o.parentNode.replaceChild(p,o),n=p}return n}function R(t,e,i){var n=C("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}function O(t){var e=D(t);e&&"OBJECT"==e.nodeName&&(g.ie&&g.win?(e.style.display="none",function(){4==e.readyState?I(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function I(t){var e=D(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function D(t){var e=null;try{e=h.getElementById(t)}catch(t){}return e}function C(t){return h.createElement(t)}function j(t){var e=g.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]}function M(t,e,i,n){if(!g.ie||!g.mac){var o=h.getElementsByTagName("head")[0];if(o){var u=i&&"string"==typeof i?i:"screen";if(n&&(r=null,s=null),!r||s!=u){var c=C("style");c.setAttribute("type","text/css"),c.setAttribute("media",u),r=o.appendChild(c),g.ie&&g.win&&typeof h.styleSheets!=a&&h.styleSheets.length>0&&(r=h.styleSheets[h.styleSheets.length-1]),s=u}g.ie&&g.win?r&&typeof r.addRule==l&&r.addRule(t,e):r&&typeof h.createTextNode!=a&&r.appendChild(h.createTextNode(t+" {"+e+"}"))}}}function F(t,e){if(v){var i=e?"visible":"hidden";y&&D(t)?D(t).style.visibility=i:M("#"+t,"visibility:"+i)}}function B(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=a?encodeURIComponent(t):t}return g.w3&&((typeof h.readyState!=a&&"complete"==h.readyState||typeof h.readyState==a&&(h.getElementsByTagName("body")[0]||h.body))&&T(),y||(typeof h.addEventListener!=a&&h.addEventListener("DOMContentLoaded",T,!1),g.ie&&g.win&&(h.attachEvent("onreadystatechange",(function(){"complete"==h.readyState&&(h.detachEvent("onreadystatechange",arguments.callee),T())})),c==top&&function(){if(!y){try{h.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}T()}}()),g.wk&&function(){y||(/loaded|complete/.test(h.readyState)?T():setTimeout(arguments.callee,0))}(),k(T))),g.ie&&g.win&&window.attachEvent("onunload",(function(){for(var t=m.length,e=0;e<t;e++)m[e][0].detachEvent(m[e][1],m[e][2]);for(var i=b.length,o=0;o<i;o++)O(b[o]);for(var r in g)g[r]=null;for(var s in g=null,n)n[s]=null;n=null})),{registerObject:function(t,e,i,n){if(g.w3&&t&&e){var o={};o.id=t,o.swfVersion=e,o.expressInstall=i,o.callbackFn=n,_[_.length]=o,F(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(g.w3)return N(t)},embedSWF:function(t,e,i,n,o,r,s,u,c,h){var p={success:!1,id:e};g.w3&&!(g.wk&&g.wk<312)&&t&&e&&i&&n&&o?(F(e,!1),w((function(){i+="",n+="";var d={};if(c&&typeof c===l)for(var f in c)d[f]=c[f];d.data=t,d.width=i,d.height=n;var _={};if(u&&typeof u===l)for(var b in u)_[b]=u[b];if(s&&typeof s===l)for(var m in s)typeof _.flashvars!=a?_.flashvars+="&"+m+"="+s[m]:_.flashvars=m+"="+s[m];if(j(o)){var y=L(d,_,e);d.id==e&&F(e,!0),p.success=!0,p.ref=y}else{if(r&&P())return d.data=r,void x(d,_,e,h);F(e,!0)}h&&h(p)}))):h&&h(p)},switchOffAutoHideShow:function(){v=!1},ua:g,getFlashPlayerVersion:function(){return{major:g.pv[0],minor:g.pv[1],release:g.pv[2]}},hasFlashPlayerVersion:j,createSWF:function(t,e,i){return g.w3?L(t,e,i):void 0},showExpressInstall:function(t,e,i,n){g.w3&&P()&&x(t,e,i,n)},removeSWF:function(t){g.w3&&O(t)},createCSS:function(t,e,i,n){g.w3&&M(t,e,i,n)},addDomLoadEvent:w,addLoadEvent:k,getQueryParamValue:function(t){var e=h.location.search||h.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return B(e);for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return B(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(E){var n=D("SWFObjectExprInst");n&&t&&(n.parentNode.replaceChild(t,n),e&&(F(e,!0),g.ie&&g.win&&(t.style.display="block")),i&&i(o)),E=!1}}}}();e.exports=n},{}],34:[function(t,e,i){var n=t("./pure-instance"),o=function(t,e){var i=new Error(t,e);i.name=this.name,this.message=i.message,this.stack=i.stack};o.create=function(t){var e=n(this);return e.name=t,e},(o.prototype=n(Error)).name="ErrorClass",e.exports=o},{"./pure-instance":36}],35:[function(t,e,i){var n=t("../async/events"),o=function(t){if(t){for(var e in t)"_"===e[0]||"function"!=typeof t[e]||t[e]===Object.prototype[e]||t.hasOwnProperty(e)||n.prototype.hasOwnProperty(e)||(this[e]=t[e].bind(t));t.pipeEvents&&(n.call(this),this.on=n.prototype.on,this.once=n.prototype.once,this.off=n.prototype.off,this.clearListeners=n.prototype.clearListeners,t.pipeEvents(this))}};o.exportStatic=function(t,e,i){i=i||[],Object.keys(t).forEach((function(n){t.hasOwnProperty(n)&&"_"!==n[0]&&"prototype"!==n&&-1===i.indexOf(n)&&(e[n]=t[n])}))},o.createClass=function(t,e,i){var n,r=function(){var e=function(){};e.prototype=t.prototype;var i=new e;return t.apply(i,arguments),i._proxy()},s=function(){};for(var a in s.prototype=(e||o).prototype,r.prototype=new s,t.prototype)n=t.prototype[a],Object.prototype[a]!=n&&"function"!=typeof n&&"_"!==a[0]&&(r.prototype[a]=n);return t.prototype._proxy=function(){return this.__proxy||(this.__proxy=function(t){var e=o.prototype;o.prototype=r.prototype;var i=new o(t);return o.prototype=e,i}(this)),this.__proxy},i||o.exportStatic(t,r),r},e.exports=o},{"../async/events":29}],36:[function(t,e,i){e.exports=function(t){var e=function(){};return e.prototype=t.prototype,new e}},{}],37:[function(t,e,i){e.exports=function(t){var e,i,n=[].slice.call(arguments,1);if(!0===n[n.length-1])e=t,n.pop();else for(i in e={},t)t.hasOwnProperty(i)&&(e[i]=t[i]);for(var o=0,r=n.length;o<r;o++)for(i in n[o])n[o].hasOwnProperty(i)&&(e[i]=n[o][i]);return e}},{}],38:[function(t,e,i){t("../export"),ya.music.lib||(ya.music.lib={});var n=t("./async/events"),o=t("./class/error-class"),r=t("./class/pure-instance"),s=function(){n.call(this)};s.prototype=r(n),s.mixin=n.mixin,s.eventize=n.eventize;var a=function(){o.apply(this,arguments)};a.prototype=r(o),a.create=o.create,ya.music.lib.Events=s,ya.music.lib.Error=a,ya.music.lib.Promise=t("./async/promise"),ya.music.lib.Deferred=t("./async/deferred"),ya.music.lib.pureInstance=r,ya.music.lib.merge=t("./data/merge"),ya.music.info=t("./browser/detect")},{"../export":9,"./async/deferred":28,"./async/events":29,"./async/promise":30,"./browser/detect":32,"./class/error-class":34,"./class/pure-instance":36,"./data/merge":37}],39:[function(t,e,i){t("../../../export");var n=t("./loader-error");ya.music.Audio.LoaderError=n},{"../../../export":9,"./loader-error":40}],40:[function(t,e,i){var n=t("../../class/error-class"),o=function(t){n.call(this,t)};o.prototype=n.create("LoaderError"),o.TIMEOUT="request timeout",o.FAILED="request failed",e.exports=o},{"../../class/error-class":34}],41:[function(t,e,i){e.exports=function(){}},{}],42:[function(t,e,i){t("../export");var n=t("./logger");ya.music.Audio.Logger=n},{"../export":9,"./logger":43}],43:[function(t,e,i){var n=t("../lib/noop"),o=function(t){this.channel=t};o.ignores=[],o.logLevels=[],o.prototype.debug=n,o.prototype.log=n,o.prototype.info=n,o.prototype.warn=n,o.prototype.error=n,o.prototype.trace=n,o.prototype._showUrl=function(t){return o.showUrl(t)},o.showUrl=function(t){return t},["debug","log","info","warn","error","trace"].forEach((function(t){o.prototype[t]=function(){var e=[].slice.call(arguments);e.unshift(this.channel),e.unshift(t),o.log.apply(o,e)}})),o.log=function(t,e,i){var n=[].slice.call(arguments,3).map((function(t){return t&&t._logger&&t._logger()||t})),r={timestamp:+new Date,level:t,channel:e,context:i,message:n};o.ignores[e]||-1===o.logLevels.indexOf(t)||o._dumpEntry(r)},o._dumpEntry=function(t){try{var e=t.level,i=t.context&&(t.context.taskName||t.context.name),n=t.context&&(t.context._logger?t.context._logger():"");"function"!=typeof console[e]?console.log.apply(console,[e.toUpperCase(),o._formatTimestamp(t.timestamp),"["+t.channel+(i?":"+i:"")+"]",n].concat(t.message)):console[e].apply(console,[o._formatTimestamp(t.timestamp),"["+t.channel+(i?":"+i:"")+"]",n].concat(t.message))}catch(t){}},o._formatTimestamp=function(t){var e=new Date(t),i=e.getMilliseconds();return i=i>100?i:i>10?"0"+i:"00"+i,e.toLocaleTimeString()+"."+i},e.exports=o},{"../lib/noop":41}]},{},[27])}).call(this,i(3).setImmediate)},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(4),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(0))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,o,r,s,a,l=1,u={},c=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){r.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(o=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):n=function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return u[l]=o,n(l),l++},p.clearImmediate=d}function d(t){delete u[t]}function f(t){if(c)setTimeout(f,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(0),i(5))},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],c=!1,h=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&d())}function d(){if(!c){var t=a(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function _(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new f(t,e)),1!==u.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){var n=i(7),o=i(8);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};n(o,r);t.exports=o.locals||{}},function(t,e,i){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),s=[];function a(t){for(var e=-1,i=0;i<s.length;i++)if(s[i].identifier===t){e=i;break}return e}function l(t,e){for(var i={},n=[],o=0;o<t.length;o++){var r=t[o],l=e.base?r[0]+e.base:r[0],u=i[l]||0,c="".concat(l," ").concat(u);i[l]=u+1;var h=a(c),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==h?(s[h].references++,s[h].updater(p)):s.push({identifier:c,updater:b(p,e),references:1}),n.push(c)}return n}function u(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var c,h=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function p(t,e,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=h(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function d(t,e,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),r&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var f=null,_=0;function b(t,e){var i,n,o;if(e.singleton){var r=_++;i=f||(f=u(e)),n=p.bind(null,i,r,!1),o=p.bind(null,i,r,!0)}else i=u(e),n=d.bind(null,i,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var i=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var o=a(i[n]);s[o].references--}for(var r=l(t,e),u=0;u<i.length;u++){var c=a(i[u]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}i=r}}}},function(t,e,i){"use strict";i.r(e);var n=i(1),o=i.n(n)()(!1);o.push([t.i,"[class*=\"bbl_\"]{\n    box-sizing: border-box;\n}\n.bbl_player_main {\n    width: 100%;\n    font-family: sans-serif;\n}\n.bbl_player_main::after {\n    content: \"\";\n    clear: both;\n    display: table;\n}\n.bbl_player_cover {\n    height: 193px;\n    width: 220px;\n    vertical-align: middle;\n    background-repeat: no-repeat;\n    background-size: cover;\n    position: relative;\n    margin: auto;\n}\n.bbl-timer-inputs label {\n    display: block;\n    color: #494949;\n    text-transform: uppercase;\n}\n.bbl-timer-inputs input:focus {\n    outline: 0;\n}\n.bbl-timer-inputs input {\n    line-height: 1.65;\n    display: block;\n    padding: 7px 14px;\n    margin: auto;\n    border: 1px solid #eee;\n    font-size: 16px;\n}\n.bbl_player_cover .bbl_label {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n}\n.bbl_cover_block {\n    float: left;\n    display: block;\n}\n.bbl_buy_btns_block {\n    padding: 15px;\n    width: 190px;\n    margin: auto;\n}\n.bbl_player_body {\n    float: left;\n    min-width: 530px;\n}\n.bbl_player_clearfix {\n    display: block;\n    clear: both;\n    content: \"\";\n}\n.bbl_player_controls {\n    margin: 20px;\n    clear: both;\n}\n.bbl_btn {\n    box-shadow:inset 0px 1px 0px 0px #54a3f7;\n\tbackground-color:#007dc1;\n\tborder-radius:3px;\n\tborder:1px solid #124d77;\n\tdisplay:inline-block;\n\tcursor:pointer;\n\tcolor:#ffffff;\n\tfont-size:13px;\n\tpadding:6px 24px;\n\ttext-decoration:none;\n    text-shadow:0px 1px 0px #154682;\n    vertical-align: middle;\n    margin: 0px 5px;\n}\n.bbl_btn:hover {\n\tbackground-color:#0061a7;\n}\n.bbl_btn:active {\n    position:relative;\n\ttop:1px;\n}\n.bbl_player_chapters {\n    overflow-y: auto;\n    display: block;\n    clear: both;\n    border: #999999 solid 1px;\n    border-radius: 3px;\n    margin-top: 15px;\n    max-height: 200px;\n    font-size: 10pt;\n}\n.bbl_player_chapter.active,\n.bbl_player_chapter.notactive {\n    cursor: pointer;\n}\n.bbl_player_chapter.active {\n    background-color: rgba(68, 152, 197, 0.3);\n    color: #0081c5;\n}\n.bbl_player_chapter.notactive {\n    background-color: rgba(0,129,197,0.3);\n    color: rgba(0,129,197,0.5);\n}\n.bbl_player_chapter.block {\n    background-color: #edf0f5;\n    color: #999;\n}\n.bbl_player_chapter {\n    display: block;\n    clear: both;\n    padding: 15px;\n    font-size: 10pt;\n}\n.bbl_player_chapter_title {\n    display: block;\n    float: left;\n    font-weight: bold;\n}\n.bbl_player_chapter_time {\n    display: block;\n    float: right;\n}\n.playicon {\n    content: url('https://pub-cdn.bibliovk.ru/referals/images/play-solid.svg');\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    width: 18px;\n    filter: invert(100%);\n}\n.pauseicon {\n    content: url('https://pub-cdn.bibliovk.ru/referals/images/pause-solid.svg');\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    width: 18px;\n    filter: invert(100%);\n}\n.backwardicon {\n    content: url('https://pub-cdn.bibliovk.ru/referals/images/backward-solid.svg');\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    width: 9px;\n    filter: invert(100%);\n}\n.forwardicon {\n    content: url('https://pub-cdn.bibliovk.ru/referals/images/forward-solid.svg');\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    width: 9px;\n    filter: invert(100%);\n}\n.timericon {\n    content: url('https://pub-cdn.bibliovk.ru/referals/images/stopwatch-solid.svg');\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    width: 13px;\n    filter: invert(100%);\n}\n.bbl-overlay {\n    visibility: hidden;\n    position: fixed;\n    font-family: sans-serif;\n    left: 0px;\n    top: 0px;\n    width:100%;\n    height:100%;\n    text-align:center;\n    z-index: 1000;\n    background-color: rgba(0,0,0,0.6);\n}\n.bbl-timer-modal {\n    width: 40%;\n    height: 300px;\n    background-color: white;\n    display: block;\n    margin: 30px auto;\n    padding: 20px;\n    position: relative;\n}\n.bbl-timer-modal h3 {\n    color: #484848;\n    margin: 0px;\n}\n.bbl-timer-modal h4 {\n    color: #9b9c9e;\n    margin: 0px;\n    margin-top: 5px;\n}\n.closeicon {\n    content: url('https://pub-cdn.bibliovk.ru/referals/images/window-close-solid.svg');\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    width: 13px;\n}\n.close-modal {\n    position: absolute;\n    right: 1px;\n    top: 1px;\n    width: 20px;\n    cursor: pointer;\n}\n.selectbox {\n    display: inline-block;\n    margin-left: 5px;\n  }\n  \n.selectbox select {\n    background-color: #0563af;\n    color: white;\n    padding: 7px;\n    border: none;\n    font-size: 13px;\n    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);\n    -webkit-appearance: button;\n    appearance: button;\n    outline: none;\n    border-radius:3px;\n\tborder:1px solid #124d77;\n}\n  \n.selectbox::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 20%;\n    height: 100%;\n    text-align: center;\n    font-size: 28px;\n    line-height: 45px;\n    color: rgba(255, 255, 255, 0.5);\n    background-color: rgba(255, 255, 255, 0.1);\n    pointer-events: none;\n}\n  \n.selectbox:hover::before {\n    color: rgba(255, 255, 255, 0.6);\n    background-color: rgba(255, 255, 255, 0.2);\n}\n  \n.selectbox select option {\n    padding: 30px;\n}\n\n.bbl_btn_green {\n\tbox-shadow:inset 0px 1px 0px 0px #9acc85;\n\tbackground-color:#74ad5a;\n\tborder:1px solid #3b6e22;\n\tdisplay:inline-block;\n\tcursor:pointer;\n    color:#ffffff;\n    width: 100%;\n    margin-top: 5px;\n\tfont-size:13px;\n\tfont-weight:bold;\n\tpadding:6px 12px;\n    text-decoration:none;\n    text-align: center;\n}\n.bbl_btn_green:hover {\n\tbackground-color:#68a54b;\n}\n.bbl_btn_green:active {\n\tposition:relative;\n\ttop:1px;\n}\n.bbl_btn_orange {\n    box-shadow:inset 0px 1px 0px 0px #fce2c1;\n\tbackground-color:#ffc477;\n\tborder-radius:6px;\n\tborder:1px solid #eeb44f;\n\tdisplay:inline-block;\n\tcursor:pointer;\n\tcolor:#ffffff;\n    width: 100%;\n    font-size:15px;\n    text-align: center;\n\tfont-weight:bold;\n\tpadding:6px 24px;\n\ttext-decoration:none;\n\ttext-shadow:0px 1px 0px #cc9f52;\n}\n.bbl_btn_orange:hover {\n\tbackground-color:#fb9e25;\n}\n.bbl_btn_orange:active {\n    position:relative;\n\ttop:1px;\n}\n\n.start_timer {\n    text-transform: uppercase;\n    font-size: 16px;\n}\n\n.bbl_label {\n    color: white;\n    padding: 8px;\n}\n\n.bbl_label_success {background-color: #4CAF50;}\n\n[class*=\"bbl_col-\"] {\n    width: 100%;\n}\n  \n  @media only screen and (min-width: 600px) {\n    /* For tablets: */\n    .bbl_col-s-1 {width: 8.33%;}\n    .bbl_col-s-2 {width: 16.66%;}\n    .bbl_col-s-3 {width: 25%;}\n    .bbl_col-s-4 {width: 33.33%;}\n    .bbl_col-s-5 {width: 41.66%;}\n    .bbl_col-s-6 {width: 50%;}\n    .bbl_col-s-7 {width: 58.33%;}\n    .bbl_col-s-8 {width: 66.66%;}\n    .bbl_col-s-9 {width: 75%;}\n    .bbl_col-s-10 {width: 83.33%;}\n    .bbl_col-s-11 {width: 91.66%;}\n    .bbl_col-s-12 {width: 100%;}\n  }\n  \n  @media only screen and (min-width: 768px) {\n    /* For desktop: */\n    .bbl_col-1 {width: 8.33%;}\n    .bbl_col-2 {width: 16.66%;}\n    .bbl_col-3 {width: 25%;}\n    .bbl_col-4 {width: 33.33%;}\n    .bbl_col-5 {width: 41.66%;}\n    .bbl_col-6 {width: 50%;}\n    .bbl_col-7 {width: 58.33%;}\n    .bbl_col-8 {width: 66.66%;}\n    .bbl_col-9 {width: 75%;}\n    .bbl_col-10 {width: 83.33%;}\n    .bbl_col-11 {width: 91.66%;}\n    .bbl_col-12 {width: 100%;}\n  }\n\n  @media only screen and (min-width: 1400px) {\n      /* For large: */\n    .bbl_col-l-1 {width: 8.33%;}\n    .bbl_col-l-2 {width: 16.66%;}\n    .bbl_col-l-3 {width: 25%;}\n    .bbl_col-l-4 {width: 33.33%;}\n    .bbl_col-l-5 {width: 41.66%;}\n    .bbl_col-l-6 {width: 50%;}\n    .bbl_col-l-7 {width: 58.33%;}\n    .bbl_col-l-8 {width: 66.66%;}\n    .bbl_col-l-9 {width: 75%;}\n    .bbl_col-l-10 {width: 83.33%;}\n    .bbl_col-l-11 {width: 91.66%;}\n    .bbl_col-l-12 {width: 100%;}\n  }\n\n  @media only screen and (max-width: 1400px) {\n      .bbl-timer-modal {\n          width: 80%;\n      }\n  }",""]),e.default=o},function(t,e,i){"use strict";i.r(e);i(2);var n="https://api.bibliovk.ru/api/ref";function o(t,e,i,o,r=!1){let s=new XMLHttpRequest;var a,l=n+"/track/"+i+"/play/mp3/medium";return o.concat_created&&(l=n+"/book/"+o.id+"/full/medium"),r&&(l+="?reserve=1"),s.open("GET",l,!1),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-Biblio-Auth","Bearer "+t),s.setRequestHeader("X-Biblio-User",e),s.onload=function(){a=JSON.parse(s.response)},s.send(),a}function r(t,e,i,o){if(null==t||null==e||null==i||o<=0)return;let r=new XMLHttpRequest;r.open("POST",n+"/system/listen-time/collect",!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Biblio-Auth","Bearer "+t),r.setRequestHeader("X-Biblio-User",e),r.send(JSON.stringify({data:[{book_id:i.id,time:o,timestamp:Math.round(Date.now()/1e3)}]}))}function s(t){for(t+=(new Date).getTime();new Date<=t;);}function a(t,e){var i=0,n=u(t,e);for(let t of e.tracks){if(!(t.number<n.number))break;i+=t.duration}return i}function l(t,e,i,n=!1){var o={duration:Math.round(i.duration),position:Math.round(i.position)};if(!t.concat_created||n)return o;var r=Math.round(e),s=0;for(let e of t.tracks)if((s+=e.duration)>=r){o.duration=e.duration,o.position=Math.round(r-(s-e.duration));break}return o}function u(t,e){var i=null;for(let n of e.tracks)if(n.id==t){i=n;break}return i}i(6);var c=window||c;c.Biblio=class{constructor(){this._callback_widgetIsInit=function(){},this._mn()}_mn(){this.EVENT_PAUSE="bbl-pause",this.EVENT_PLAY="bbl-play",this.EVENT_ENDED="bbl-ended",this.EVENT_STOP="bbl-stop",this.EVENT_PLAYBACKRATE_CHANGE="bbl-playback-change",this.EVENT_VOLUME="bbl-volume",this.EVENT_PROGRESS="bbl-progress",this.EVENT_CRASHED="bbl-crashed",this.EVENT_ERROR="bbl-error",this.EVENT_STATE="bbl-state",this.EVENT_WIDGET="bbl-widget-init",this._lts=0,this._bkid=0,this._pltkid=0,this._sltr=!1,this._st="stop",this._floaded=!1,this._prgsld=0,this._bk=null,this._bl=null,this._us=null,this._blk=null,this._wgtisinit=!1,this._pltkd=null,this._apl=null,this._plbrate="1.0",this._callback_playRateChange=function(){},this._callback_playProgress=function(t){},this._callback_playEnded=function(){}}init(t){var e,i,o,r,s;return this._mn(),this._bkid=t.book_id,this._refkey=t.referal_key,this._ukey=t.user_key,null!=this._ukey&&(this._us=function(t,e){let i=new XMLHttpRequest;var o;return i.open("GET",n+"/me",!1),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("X-Biblio-Auth","Bearer "+t),i.setRequestHeader("X-Biblio-User",e),i.onload=function(){o=JSON.parse(i.response)},i.send(),o}(this._refkey,this._ukey),this._bl=function(t,e){let i=new XMLHttpRequest;var o;return i.open("GET",n+"/me/billing",!1),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("X-Biblio-Auth","Bearer "+t),i.setRequestHeader("X-Biblio-User",e),i.onload=function(){o=JSON.parse(i.response)},i.send(),o}(this._refkey,this._ukey)),this._bk=function(t,e,i){let o=new XMLHttpRequest;var r;return null==e?(o.open("GET",n+"/book/guest/"+i,!1),o.setRequestHeader("X-Biblio-User","")):(o.open("GET",n+"/book/"+i,!1),o.setRequestHeader("X-Biblio-User",e)),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-Biblio-Auth","Bearer "+t),o.onload=function(){r=JSON.parse(o.response)},o.send(),r}(this._refkey,this._ukey,this._bkid),this._blk=(e=this._ukey,i=this._us,o=this._bl,r=this._bk,s=!1,null==e||((r.amount>0||r.for_subscribers)&&(s=!0,null!=e&&i.purchased_books.includes(r.id)&&(s=!1),null!=e&&r.for_subscribers&&"free"!=o.name&&(s=!1),null==e&&(s=!0)),s)),this._iP(),this._iE(),this._wgtisinit=!0,this._callback_widgetIsInit(),this}isWidgetInit(){return this._wgtisinit}on(t,e){if(t==this.EVENT_WIDGET&&(this._callback_widgetIsInit=e),!this._wgtisinit)return!1;switch(t){case this.EVENT_PAUSE:this._apl.on(ya.music.Audio.EVENT_PAUSE,e);break;case this.EVENT_PLAY:this._apl.on(ya.music.Audio.EVENT_PLAY,e);break;case this.EVENT_ENDED:this._callback_playEnded=e;break;case this.EVENT_STOP:this._apl.on(ya.music.Audio.EVENT_STOP,e);break;case this.EVENT_PLAYBACKRATE_CHANGE:this._callback_playRateChange=e;break;case this.EVENT_VOLUME:this._apl.on(ya.music.Audio.EVENT_VOLUME,e);break;case this.EVENT_PROGRESS:this._callback_playProgress=e;break;case this.EVENT_CRASHED:this._apl.on(ya.music.Audio.EVENT_CRASHED,e);break;case this.EVENT_ERROR:this._apl.on(ya.music.Audio.EVENT_ERROR,e);break;case this.EVENT_STATE:this._apl.on(ya.music.Audio.EVENT_STATE,e)}}pause(){if(null==this._apl)return!1;this._rnPs()}play(t=0){if(null==this._apl)return!1;this._rnPl(t)}stop(){if(null==this._apl)return!1;this._asp(),this._apl.stop(),this._st="stop"}seek(t){if(null==this._apl)return!1;this._apl.setPosition(function(t,e,i){if(t.concat_created){var n=u(i,t),o=0;if(null==n)return e;for(let e of t.tracks){if(e.number>=n.number)break;o+=e.duration}return o+e}return e}(this._bk,t,this._pltkid))}isSleepTimerActive(){return this._sltr}stopSleepTimer(){null!=p?(clearTimeout(p),this._sltr=!1):this._sltr=!1}isForSubscribers(){return this._bk.for_subscribers}getAmount(){return this._bk.amount}startPurchaseBook(){null!=this._ukey&&function(t,e,i){let n=new XMLHttpRequest;n.open("GET","https://pay.bibliovk.ru/book/"+i+"/purchase",!1),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-Biblio-Auth","Bearer "+t),n.setRequestHeader("X-Biblio-User",e),n.setRequestHeader("X-Biblio-Referer",window.location.href),n.onload=function(){var t=JSON.parse(n.response);window.location.href=t.redirect_to},n.send()}(this._refkey,this._ukey,this._bkid)}destroy(){null==this._apl||"play"!=this._st&&"pause"!=this._st||this._apl.stop(),this._st="stop",this._mn()}startPurchaseSubscribtion(t="biblio.month"){if(null==this._ukey)return!1;var e,i=window.location.href;window.location.href="https://pay.bibliovk.ru/subscribe?data="+(e=this._ukey+"||"+this._refkey+"||"+i+"||"+t,btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)}))))}getBookPurchaseIsNeed(){return this._blk}setSleepTimer(t,e){var i=this;p=setTimeout((function(){i._stpbT()}),60*t*60*1e3+60*e*1e3),this._sltr=!0}getPlayerState(){return null==this._apl?"none":this._apl.getState()}getPlaybackRate(){return this._plbrate}setPlaybackRate(t){this._apl.setPlaybackRate(t),this._callback_playRateChange(),this._plbrate=t}ff(){this._apl.setPosition(this._apl.getPosition()+15)}rw(){this._apl.setPosition(this._apl.getPosition()-15)}getPosition(){return 0!=this._pltkid&&"stop"!=this._st||null==this._bk.saved_position?function(t,e,i){if(e.concat_created){var n=u(i,e),o=0;if(null==n)return Math.round(t);for(let t of e.tracks){if(t.number>=n.number)break;o+=t.duration}return Math.round(t-o)}return Math.round(t)}(this._apl.getPosition(),this._bk,this._pltkid):this._bk.saved_position.position}getCurrentTrack(){return 0==this._pltkid&&null!=this._bk.saved_position?this._bk.saved_position.track_id:this._pltkid}getDuration(){return this._blk&&0==this._pltkid&&"stop"==this._st?this._apl.getDuration(this._bk.audio_sample):function(t,e,i){var n=t;if(e.concat_created){if(0==i||null==i)return n;for(let t of e.tracks)if(t.id==i){n=t.duration;break}}return n}(this._apl.getDuration(0),this._bk,this._pltkid)}getBookMeta(){return{title:this._bk.title,bio:this._bk.bio,cover:this._bk.cover,duration:this._bk.duration,plus_18:this._bk.plus_18,plus_16:this._bk.plus_16,with_music:this._bk.with_music,tracks_count:this._bk.tracks_count,author_name:this._bk.author_name,reader_name:this._bk.reader_name,genres:this._bk.genres_ids,series_name:this._bk.series_name,series_num:this._bk.series_num,copyright_holder:this._bk.meta_data.copyright_holder}}getTracksMeta(){var t=[];return this._bk.tracks.forEach((function(e){t.push({id:e.id,name:e.name,duration:e.duration,number:e.number})})),t}getVolume(){return this._apl.getVolume()}setVolume(t){return this._apl.setVolume(t)}_stpbT(){this._apl.pause(),this._sltr=!1}_rnPl(t=0,e=!1){var i=this;if(this._blk&&"stop"==this._st)this._apl.isPreloaded(this._bk.audio_sample)?(this._apl.setPosition(0),this._apl.playPreloaded(this._bk.audio_sample)):this._apl.preload(this._bk.audio_sample).then((function(){i._apl.setPosition(0),i._apl.playPreloaded(i._bk.audio_sample)}));else if("pause"!=this._st||0!=t){if(!this._bk.concat_created||this._floaded&&null!=this._pltkd||(this._pltkd=o(this._refkey,this._ukey,this._bk.tracks[0].id,this._bk,e),this._floaded=!0),this._bk.concat_created&&null!=this._pltkd){var n=Math.floor(Date.now()/1e3);this._pltkd.link_expire_timestamp<=n&&(this._pltkd=o(this._refkey,this._ukey,this._bk.tracks[0].id,this._bk,e),this._floaded=!0)}if(0!=t)return"pause"!=this._st&&"play"!=this._st||this._bk.concat_created||this._apl.stop(0),this._bk.concat_created||(this._pltkd=o(this._refkey,this._ukey,t,this._bk,e)),this._bk.concat_created?"play"==this._st?this._apl.setPosition(a(t,this._bk)):"pause"==this._st?(this._apl.setPosition(a(t,this._bk)),this._apl.resume()):(this._apl.preload(this._pltkd.download_url).then((function(){s(1e3)})),this._apl.play(i._pltkd.download_url).then((function(){i._apl.setPosition(a(t,i._bk))}))):this._apl.preload(this._pltkd.download_url).then((function(){s(1e3),i._apl.play(i._pltkd.download_url)})),void(this._pltkid=t);if(null==this._bk.saved_position)return"pause"!=this._st&&"play"!=this._st||this._bk.concat_created||this._apl.stop(0),this._bk.concat_created||(this._pltkd=o(this._refkey,this._ukey,this._bk.tracks[0].id,this._bk,e)),this._apl.preload(this._pltkd.download_url).then((function(){s(1e3)})),this._apl.play(i._pltkd.download_url),void(this._pltkid=i._bk.tracks[0].id);"pause"!=this._st&&"play"!=this._st||this._bk.concat_created||this._apl.stop(0),this._bk.concat_created||(this._pltkd=o(this._refkey,this._ukey,this._bk.saved_position.track_id,this._bk,e)),this._apl.preload(this._pltkd.download_url).then((function(){s(1e3)}));var r=this._bk.saved_position.position;this._bk.concat_created&&(r+=a(this._bk.saved_position.track_id,this._bk)),this._apl.play(this._pltkd.download_url).then((function(){i._apl.setPosition(r)})),this._pltkid=this._bk.saved_position.track_id}else this._apl.resume()}_rnPs(){this._apl.pause()}_asp(){if(0!=this._pltkid&&void 0!==this._bk){var t=function(t,e,i){var n={book_id:e.id,track_id:t,position:Math.round(i)},o=Math.round(i);if(e.concat_created){var r=0;for(let t of e.tracks)if((r+=t.duration)>=o){n={book_id:e.id,track_id:t.id,position:Math.round(o-(r-t.duration))};break}}return n}(this._pltkid,this._bk,this._apl.getPosition());null==this._bk.saved_position?this._bk.saved_position={book_id:t.book_id,track_id:t.track_id,position:t.position}:(this._bk.saved_position.book_id=t.book_id,this._bk.saved_position.track_id=t.track_id,this._bk.saved_position.position=t.position),function(t,e,i){let o=new XMLHttpRequest;o.open("PUT",n+"/me/savedPosition",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-Biblio-Auth","Bearer "+t),o.setRequestHeader("X-Biblio-User",e),o.send(JSON.stringify({book_id:i.bkid,track_id:i.tkid,position:i.pos}))}(this._refkey,this._ukey,{bkid:t.book_id,tkid:t.track_id,pos:t.position})}}_iE(){var t=this;if(this._blk)return this._apl.on(ya.music.Audio.EVENT_PLAY,(function(){t._st="play"})),this._apl.on(ya.music.Audio.EVENT_PAUSE,(function(){t._st="pause"})),this._apl.on(ya.music.Audio.EVENT_ENDED,(function(){t._st="stop"})),void this._apl.on(ya.music.Audio.EVENT_PROGRESS,(function(e){null!=t._apl?null!=t._bk?t._callback_playProgress(l(t._bk,t._apl.getPosition(),e,!0)):console.log("BIBLIO: book object is null"):console.log("BIBLIO: player object is null")}));this._apl.on(ya.music.Audio.EVENT_PLAY,(function(){h=setInterval((function(){t._asp()}),15e3),t._st="play",d=setInterval((function(){t._lts+=1}),1e3)})),this._apl.on(ya.music.Audio.EVENT_STOP,(function(){clearInterval(h),t._st="stop",t._floaded=!1,clearInterval(d),t._lts>0&&(r(t._refkey,t._ukey,t._bk,t._lts),t._lts=0)})),this._apl.on(ya.music.Audio.EVENT_PAUSE,(function(){clearInterval(h),t._st="pause",t._asp(),clearInterval(d),t._lts>0&&(r(t._refkey,t._ukey,t._bk,t._lts),t._lts=0)})),this._apl.on(ya.music.Audio.EVENT_ERROR,(function(){null!=t._pltkid&&(t._apl.stop(),t._floaded=!1,clearInterval(d),t._rnPl(t._pltkid,!0))})),this._apl.on(ya.music.Audio.EVENT_PROGRESS,(function(e){if(null!=t._apl)if(null!=t._bk)if(t._prgsld>=2){if(t._bk.concat_created){var i=t._pltkid;if(t._pltkid=function(t,e){var i=0,n=0;for(let o of t.tracks)if((i+=o.duration)>=e){n=o.id;break}return n}(t._bk,e.position),i!=t._pltkid){var n=u(i,t._bk),o=u(t._pltkid,t._bk);n.number<o.number&&t._callback_playEnded()}}t._callback_playProgress(l(t._bk,t._apl.getPosition(),e)),t._prgsld=0}else t._prgsld+=1;else console.log("BIBLIO: book object is null");else console.log("BIBLIO: player object is null")})),this._apl.on(ya.music.Audio.EVENT_ENDED,(function(){if(clearInterval(h),t._floaded=!1,t._st="stop",clearInterval(d),t._lts>0&&(r(t._refkey,t._ukey,t._bk,t._lts),t._lts=0),!t._bk.concat_created){var e=u(t._pltkid,t._bk);if(t._callback_playEnded(),null!=e.next_id)return void t._rnPl(e.next_id)}}))}_iP(){var t=this;this._apl=new ya.music.Audio("html5"),this._apl.initPromise().then((function(){t._blk&&t._apl.preload(t._bk.audio_sample)}))}};var h=null,p=null,d=null}]);